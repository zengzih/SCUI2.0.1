


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>指令管理</title>
    
    <script type="text/javascript">
        var resourceList = '[/idmtwhiteListController/dataDetail, /holidayController/editPage, /investSuggestController/sendMail, /dataauth_def/manager, /sysExportTaskController/manager, breachBondInfoController/manager, /otcSettlementController/auditInq, /depositController/exportDBF, /ndSecdistrMtaQuotesController/batchAdd, /bidLotController/cancelLot, /workDelegateController/delete, /winLotManagerController/payIns, /instructionInfoController/showAll, /rfqController/manager, /autoTransferSettingController/delete, /bankController/deleteBank, /fundsInstitutionsController/manager, /perBenchmarkController/manager, /reportManagerController/manager, /bankInfoSetController/edit, /investSuggestController/dataGrid, /cbCbndLotController/exportCbndList, /ndBndDistrQuotesController/batchAdd, /bidtenderDescController/exportTenderDescPage, /deliveryObjectController/manager, /inviteLetterController/cancelAudit, /userController/edit, /cbSubCbndController/dataDetail, /otcSettlementController/hasAll, /bskPrdLinkSetController/manager, /holidayController/delete, /inviteLetterController/manager, /orderTemplateMngController/manager, /assetsController/edit, /cbSubCbndController/batchPass, /bankRealdealController/distributionMatching, /dataauth_item/manager, mailTestController/manager, /payInstrMapController/manager, /dynamicDataSourceController/save, /actualLogController/manager, /depositController/dataDetail, /userPrivilegeGroupController/manager, /roleController/manager, /comandStatusController/manager, /ndSecdistrMtaQuotesController/dataDetail, /instructionInfoController/handler, /ipoTodayController/manager, /inviteLetterController/exportTenderDesc, /inviteLetterController/dataDetail, /payConverSetController/manager, /workDelegateController/edit, /tsCustomizeTransferTypeController/manager, /cbCbndLotController/exportLotCbnd, /cbannountcementController/manager, /ndBndDistrQuotesController/edit, /ndSecdistrMtaQuotesController/manager, /bidLotController/delete, /oeSeatController/manager, /dynamicDataSourceController/manager, /cbsubprdController/exportSubCheckData, /winLotManagerController/manager, /ndBndDistrQuotesController/lotDistr, /instructDataController/adjustTransferDate, /bidCheckController/manager, /instructionInfoController/custodianPrdMapping/, /bankInfoController/manager, /otcSettlementController/canlCancelSettlementAudit, /recruitmentTemplateMngController/manager, /bidtenderDescController/manager, /indicatesWarnController/managerGM, /inviteLetterController/batchPass, /depositController/auditCancel, /instructDataController/manager, /earlyWithdrawalTemplateController/edit, /fundAttachedPersonController/manager, /ndRelatePartyController/edit, /paramRangeController/toTransferOrder, /departmentController/delete, /instructionInfoController/confirmor, /investSuggestController/edit, /cbannountcementController/delete, /winLotManagerController/import, /instructDataController/batchCreatInstruct, /depoMaturitiesController/delete, /depoRatioSetController/edit, /earlyWithdrawalController/deleteRemarks, /cbSubCbndController/cancelConfirm, /nsharesRFQController/batchAudit, /userController/editPage, /otcSettlementController/canlSettlement_1, /roleController/addPage, /nsharesRFQController/batchReportSz, /nsharesRFQController/manager, /ipoSealManagerController/manager, /bidLotController/batchAdd, /finishFileMngController/manager, /oneKeyReportController/manager, /indicatesWarnController/managerZH, /orderFormatSettingController/manager, /depositController/depositAgrCheck, /ipoCalendarController/ipoNewEvent, /otcSettlementController/cancelBackDealFile, /depositController/depositView, /cbsubprdController/exportTenderDesc, /userController/manager, /productController/productPerformance, /tsImpTemplateController/manager, /resourceController/edit, /workDelegateController/dataGrid, /depoMaturitiesController/add, /priceSubmitController/manager, /depositController/exportDepositDBF, /bankrollAccountMessageController/editBankRollAccountInfo, /brBkContactController/edit, /acctInfoQueryController/manager, /otcSettlementController/auditInaUpdate, /otcSettlementController/reCheckDealFile, /frameworkAgrController/dateAuth, /signatureSettingController/manager, /ndBndIssueAnnounceController/edit, /nsharesRFQController/cancel, /productNetAssetController/manager, /inviteLetterController/getFileNameLetter, /importDataController/manager, /cbannountcementController/exportTenderDesc, /customerGroupController/editPage, /assetsController/batchDelete, /otcSettlementController/settlementTransfer, /bidLotController/exportTenderDesc, /ipoReportInfoController/manager, /cbSubCbndController/addPage, /tsCorpPartnerInfoController/manager, /secPoolController/manager, /resourceController/tree, /departmentController/addPage, /resourceController/delete, /bankDepositController/manager, /interfaceDataReadController/manager, /customerAccountController/openAccountPage, /assetsController/editPage, /userController/batchDelete, /inviteLetterController/batchAdd, /ndBndIssueAnnounceController/add, /depositController/manager, /earlyWithdrawalController/add, /bankRealdealController/tradeCount, /bidLotController/edit, /roleController/editPage, /userController/editPwdPage, /userController/add, /ndBndDistrQuotesController/manager, /depoRatioSetController/delete, /taskTimingTriggerController/manager, /productController/manager, /brBkContactController/add, /acctInfoQueryController/bankBalanceCheck, /ndBndDistributorController/delete, /userController/delete, /orderPurposeRemarkController/manager, /tsOrganizationMapController/manager, /userController/grantPage, /idmtwhiteListController/delete, /holidayDetailController/addPage, /reportScheduleController/manager, /winLotManagerController/delete, /brBkContactController/delete, /otcSettlementController/settlementCheck, /recruitmentTemplateMngController/gotoPreview, /productController/productTendency, /cbsubprdController/manager, /otcSettlementController/invalidDealFile, /depoRatioSetController/add, /taskExecuteLogController/manager, /idmbidtenderDescController/add, /instructionInfoController/reviewer, /cbSubCbndController/manager, /taNetController/manager, /bankrollAccountMessageController/copyBankRollAccountInfo, /paymentChannelController/manager, /paramRangeController/toBondRepoParam, /payIpwhitelstController/manager, /ndBndDistributorController/exportTenderDesc, /inviteLetterController/export, /bankrollAccountMessageController/cancelAuditBankRollAccountInfoById, /ndBndDistrQuotesController/audit, /bankLaccountController/manager, /earlyWithdrawalController/download, /depoMaturitiesController/manager, /bankStatementsExportController/manager, /resourceController/add, /customerGroupController/add, /nsharesRFQController/batchReportSh, /bankController/manager, /depositController/audit, /otcSettlementController/getSettlements, /bankrollAccountMessageController/getBankRollAccountInfoById, /fundHolderShareController/manager, /departmentController/editPage, /ipoAssoReportController/manager, /bidLotController/manager, /burstPaymentInfoController/manager, /departmentController/manager, /bankInfoSetController/delete, /frameworkAgrController/add, /bankrollAccountMessageController/addBankRollAccountInfo, /customerAccountController/dataGrid, /ndRelatePartyController/add, /bankController/addBank, /depositController/batchAudit, /idmbidtenderDescController/exportTenderDesc, /BankInfoMngController/manager, /holidayController/addPage, /resourceController/treeGrid, /accountStatementController/manager, /roleController/treeGrid, /brBkContactController/dataDetail, /customerGroupController/edit, /ndBndIssueAnnounceController/delete, /frameworkAgrController/edit, /rfqController/batchInquirySet, /ipoInfoController/ipoSeInfoManager, /instructionInfoController/approveder, /earlyWithdrawalTemplateController/dataDetail, /assetsController/delete, http://120.25.127.162:88/zentao/index.php, /flowCustMainController/manager, /roleController/edit, /customerAccountController/editBankCard, /depAgrTemplateController/dataDetail, /ndBndDistrQuotesController/addCompanyQuote, /ipoProductQualController/manager, /earlyWithdrawalController/batchAddAgreemengt, /cbSubCbndController/edit, /idmbidtenderDescController/delete, /prPrivateOffInvestorController/manager, /holidayController/manager, /bidLotController/dataDetail, /cbannountcementController/edit, /organizationInfoController/manager, /subscribeManagerController/manager, /earlyWithdrawalTemplateController/download, /frameworkAgrController/dataDetail, /paramRangeController/nSharesParam, /ndBndDistrQuotesController/antiLotDistr, /resourceController/manager, /orgContactInfoController/manager, /assetsController/addPage, /ndSecdistrMtaQuotesController/exportTenderDesc, /depositController/batchDelete, /otcSettlementController/dealFileGrid, /ipoSecTraceController/cus, /otcSettlementController/canlSettlementAudit, /idmbidtenderDescController/dataDetail, /ndBndIssueAnnounceController/exportTenderDesc, /instructionInfoController/instructRecycle, /subscribeManagerController/batchReportSh, /bidtenderDescController/exportTenderDescPage, /bankrollAccountMessageController/manager, /ndBndDistributorController/add, /bankrollAccountMessageController/auditBankRollAccountInfoById, /depoMaturitiesController/dataDetail, /ndRelatePartyController/manager, /reportCombinationSettingController/manager, /druidController/druid, /tsImpInterController/manager, /depositController/batchAddAgreemengt, /idmtwhiteListController/manager, /inviteLetterController/edit, /frameworkAgrController/delete, /nsharesRFQController/updatePrice, /depAgrTemplateController/add, /cbSubCbndController/exportTenderDesc, /depAgrTemplateController/download, /resourceController/editPage, /bidLotController/confirmLot, /bankFeeController/manager, /financialProductController/manager, /customerGroupController/delete, /depositController/add, /ndBndDistributorController/edit, /cbCbndLotController/exportLotCbndCheckList, /customerAccountController/batchAccountConfirm, /depositController/agreementCreditView, /inviteLetterController/audit, /cbSubCbndController/confirm, /earlyWithdrawalController/manager, /depoMaturitiesController/edit, /depositController/addDeposit, /taskListController/manager, /cbannountcementController/add, /tsmapController/manager, /btInquiryController/manager, /cbCbndLotController/lotCbndQueryList, /rfqController/startRFQ, /roleController/delete, /tradeOrderController/manager, /vaHldParsingController/manager, /workDelegateController/manager, /bankController/editBank, /nsharesRFQController/inputtingAdd, /autoTransferSettingController/edit, /depoRatioSetController/manager, /cbsubprdController/subCbndCheckList, /instructDataController/delete, /ndSecdistrMtaQuotesController/delete, /nsharesRFQController/importData, /nsharesRFQController/confirm, /ipoCalendarController/manager, /holidayDetailController/editPage, /payInstrTempController/manager, /inviteLetterController/delete, /userController/grant, /bankInfoSetController/dataDetail, /paraSettingController/manager, /ndBndIssueAnnounceController/dataDetail, /roleController/grant, /customerGroupController/addPage, /cbScheduleController/manager, /bidCheckController/exportTenderDesc, /workDelegateController/dataDetail, /depositController/addAgreemengt, /rfqController/reportManager, /subscribeManagerController/batchReportSz, /customerAccountController/quickOpenAccountPage, /mailTemplateController/manager, /productTaDataController/manager, http://www.baidu.com, /ndBndDistrQuotesController/antiAudit, /ndBndDistributorController/dataDetail, /depositController/auditDetail, /customerAccountController/accountConfirmPage, /otcSettlementController/otcSettlementSourceFile/, /sellerHoldShareController/manager, /assetTrendController/manager, /instructDataController/loadInstructData, /customerAccountController/exportExcel, /bookProductionController/manager, /resourceController/addPage, /frameworkAgrController/manager, /depAgrTemplateController/manager, /workDelegateController/add, /earlyWithdrawalTemplateController/add, /ndBndIssueAnnounceController/download, /depAgrTemplateController/edit, /depositController/delete, /instructionInfoController/instructionInfoCheck, /taskJavaDispatchController/manager, /bizLogController/manager, /otcAccountPledgeBondController/manager, /taskActionGroupController/manager, /ndRelatePartyController/exportTenderDesc, /otcSettlementController/sendDealFile, /ndSecdistrMtaQuotesController/edit, /userController/login, /bankInfoSetController/add, /otcSettlementController/cancelDealFile, /ndRelatePartyController/delete, /ndRelatePartyController/dataDetail, /mailSendLogController/manager, /authMngController/manager, /earlyWithdrawalController/addAgreemengt, /customerAccountController/moreOpenAccountPage, /bankrollAccountMessageController/delBankRollAccountInfoById, /userController/dataGrid, /earlyWithdrawalTemplateController/manager, /orderExceptionMngController/manager, /ndBndDistrQuotesController/exportTenderDesc, /nsharesRFQController/batchConfirm, /nsharesRFQController/delete, /logFileCheckController/manager, /earlyWithdrawalTemplateController/delete, /customerAccountController/emptyAccount, /depositController/depositRatioView, /bidtenderDescController/exportTenderDesc, /ndBndIssueAnnounceController/manager, /fundInfoController/manager, /holidayController/batchDelete, /cbSubCbndController/delete, /userController/editPwd, /emailServiceController/manager, /idmbidtenderDescController/edit, /prOtcBizAcctInfoController/manager, /winLotManagerController/dataGrid, /prTadataController/manager, /autoTransferSettingController/add, /subscribeManagerController/dataGrid, /paramRangeController/manager, /earlyWithdrawalController/addRemarks, /otcInstructController/otcSettlementInstruct, /depoRatioSetController/dataDetail, /ipoFileCollectController/manager, /idmtwhiteListController/edit, /ipoReportInfoManageController/manager, /frameworkAgrController/download, /subscribeManagerController/delete, /depositController/download, /brBkContactController/manager, /assetsController/dataGrid, /cbCbndLotController/exportLotCbndQueryList, /ipoSecTraceController/manager, /cbannountcementController/export, /customerAccountController/accountEnterPage, /instructionInfoController/manager, /otcSettlementController/contractManage, /tsBizContactInfoController/manager, /attestationSetController/manager, /productController/group, /bankInfoSetController/manager, /ndBndDistributorController/manager, /depAgrTemplateController/delete, /userController/addPage, /autoTransferSettingController/manager, /exportDepositController/manager, /roleController/add, /subscribeManagerController/edit, /otcSettlementController/canlCancelSettlement_1, /ipoTodayController/ipoTodayInner, /subscribeManagerController/rwRemarkDetail, /idmbidtenderDescController/manager, /bidtenderDescController/exportBIDTenderDesc, /departmentController/treeGrid, /nsharesRFQController/dataGridGen_new, /depositController/edit, /ipoResourceConfigController/manager, /roleController/grantPage, /privilegeGroupController/manager, /instructionSetController/manager, /investSuggestController/manager, /customerGroupController/dataGrid, /ndBndDistrQuotesController/delete, /otcSettlementController/settlementTransferNew, /cbCbndLotController/lotCbndCheckList, /prFundcompanyController/manager, /bankController/dataDetail, /otcSettlementController/auditDealFile, /fileLogsController/manager, /idmtwhiteListController/add, /generalDataExportController/manager, /nsharesRFQController/edit]';
    </script>
    <link href="/scxx-web/static/iconfont/17.7.4/iconfont.css" rel="stylesheet">
    <link href="/scxx-web/static/scui/2.0/index.css" rel="stylesheet">
    <link href="/scxx-web/static/scui/1.0/index.css" rel="stylesheet">
    <link href="/scxx-web/static/scui/2.0/skin1.css" rel="stylesheet">

    <script src="/scxx-web/static/jQuery/1.11.3/jquery.min.js"></script>
    <script src="/scxx-web/static/easyUI/1.5.2/jquery.easyui.min.js"></script>
    <script src="/scxx-web/static/vue/2.3.0/index.js"></script>
    <script src="/scxx-web/static/vue-resource/1.3.3/vue-resource.min.js"></script>
    <script src="/scxx-web/static/scui/2.0/index.js"></script>
    <script src="/scxx-web/static/scui/1.0/scui.min.js"></script>

    <script src="/scxx-web/static/util/gobal.js"></script>
    <script src="/scxx-web/static/util/dataTranslate.js"></script>
    <script src="/scxx-web/static/scui/2.0/filters.js"></script>

      <script src="/scxx-web/static/minniui/miniui.js"></script>
      <link href="/scxx-web/static/minniui/miniui.css" rel="stylesheet" type="text/css">
    <style>
		.dialogExport .el-dialog.el-dialog--small{
			width:200px !important;
			padding: 3px !important;
		}
		*{
			font-family: "微软雅黑";
		}
		html, body {
			height: 100%;
			padding: 0;
			margin: 0;
			line-height: auto!important;
		}
		#mini-splitter,.mini-splitter-border,#leftTable,#rightForm{
			height: 100% !important;
		}
		#leftTable{
			/* transition: width 0.3s linear; */
		}
		#rightForm{
			overflow: auto;
			background: #fff;
			/* transition: all 0.3s linear; */
		}
    	.sc-theme.is-standard {
		    padding:15px 15px  0 15px;
		}
		ul.sc-list{
			border:1px solid #ccc;
		}
		ul.sc-list>li .el-row div:first-child{
			text-align: right;
			font-size: 12px;
			color:#475669;
			font-weight: bold;
			line-height: 24px;
		}
		ul.sc-list>li .el-row div:last-child{
			padding-left: 10px;
			line-height: 24px;
			font-size: 12px;
			color:#475669;
			padding-right: 5px;
		}
		ul.sc-list>li .el-row div:last-child span{
			display: inline-block;
			width: 100%;
			/*overflow: hidden; !*自动隐藏文字*!
			text-overflow: ellipsis;!*文字隐藏后添加省略号*!
			white-space: nowrap;!*强制不换行*!*/
		}
		ul.footer{
			padding:10px 0;
			border:1px solid #ccc;
			border-top:none;
			box-sizing: border-box;
			margin-bottom: 20px;
		}
		ul.footer li{
			height: 30px;
			line-height: 30px;
		}
		ul.footer li .el-row .el-col{
			/* text-align: center; */
			padding-left:3%;
			box-sizing:border-box;
		}
		ul.footer li .el-row .el-col span{
			font-size: 12px;
			color:#00262D;
		}
		ul.footer li .el-row .el-col span:first-child{
			color:#475669;
			font-weight: bold;
		}
		div.head{
			background: #E5E9F2;
			box-shadow: inset 0 1px 0 0 #E0E6ED, inset 0 -1px 0 0 #E0E6ED;
			border:1px solid #ccc;
			box-sizing: border-box;
			border-bottom:none;
		}
		div.head .el-row div:nth-of-type(1){
			text-align: left;
			padding-left: 20px;
		}
		div.head .el-row div:nth-of-type(1) span:first-child{
			color:#929EBD;
			font-size: 12px;
		}
		div.head .el-row div:nth-of-type(1) span:last-child{
			font-size: 12px;
			color:#5B7BFA;
			padding-left: 5px;
		}
		div.head .el-row div:nth-of-type(2){
			text-align: left;
			padding-left: 10%;
			font-size: 12px;
			font-weight: bold;
			color:#475669;
			letter-spacing: 0;
		}
		div.head .el-row div:nth-of-type(3){
			text-align: right;
			font-size: 12px;
			color:#475669;
			padding-right: 20px;
		}
		div.head .head_back{
			cursor: pointer;
		}
		.sc-theme.is-standard .el-row:first-child {
			height: auto;
		    overflow: hidden;
		    margin-bottom: 0px;
		}
		@media screen and (max-width: 1366px) {
			div.head .el-row div:nth-of-type(2){
				font-size: 12px;
			}
			ul.sc-list>li .el-row div:first-child{
				font-size: 12px;
			}
			ul.footer li .el-row .el-col span{
				font-size: 12px;
			}
		}

		/*--指令管理新建样式--*/
		@media screen and (min-width: 900px) {
			.add-mng .el-dialog{
				margin-bottom: 0;
			}
			.add-mng .el-dialog .el-dialog__body{
				padding:6px 6px;
			}
			.add-mng .el-dialog{
			}
		}
		.acct-type>td:first-child{
			display: table-cell;
		}
		.acct-type>td:last-child{
			display: table-cell;
		}
		.acct-dialog .el-dialog .el-dialog__body{
			height:auto;
		}
		
		/* .el-table .pause-row {
   	  		background:#e49d38!important;
		} */
		.el-table .error-row div.cell{
   	  		color:#FF0000!important;
		}
		.el-table .wait-handle-row div.cell{
   	  		color:#000000!important;
		}
		.el-table .has-send-row div.cell{
   	  		color:#009900!important;
		}
		.el-table .cancel-row div.cell{
   	  		color:#DAA520!important;
		}
		.el-table .other-row div.cell{
   	  		color:#808080!important;
		}
		.popover-span {
			width:100px;
			display:inline-block;
		}
		.popover-span2 {
			width:160px;
			display:inline-block;
		}
		.popover-span3 {
			width:260px;
			display:inline-block;
		}
		.popover-span4 {
			width:200px;
			display:inline-block;
		}
		.el-table__empty-text{
		   position:absolute!important;
		}
		.sc-skin1 .el-dialog .el-dialog__title{
			font-size: 14px;
		}
		.sc-skin1 .el-dialog .el-dialog__header{
			height:26px;
			line-height:26px;
		}
		.sc-skin1 .el-dialog .el-dialog__header button.el-dialog__headerbtn{
			line-height:24px;
		}
		.stateInfo{
			float:left;
			font-size:12px;
		}
		.stateInfo>div{
			display:inline-block;
		}
		.stateInfo .info_number{
			color:#fff;
			background:#fb7266;
			border-radius:50px;
			padding:0 4px;
			text-align:center;
			margin-right:12px;
			cursor: pointer;
			height:18px !important;
			line-height:18px !important;
		}
		.stateInfo span{
			vertical-align:middle;
		}
		.stateInfo .infoColor{
			display:inline-block;
			width:27px;
			height:18px !important;
			margin-right:11px;
		}
		.stateInfo .infoColor2{
			margin-right:5px;
			color: #8A2BE2;
			font-weight: bold;
			font-family: "微软雅黑";
			font-size: 15px;
		}
		.stateInfo .infoStatus{			
			width: 60px;		
			text-align:center;				
		}
		.stateInfo .fontColorBlue{			
			color: blue;						
		}
		.stateInfo .fontColorWhite{			
			color: white;						
		}
		.stateInfo .fontColorRed{			
			color: red;						
		}
		.stateInfo .fontColorBlack{	
			color: black;						
		}
		.stateInfo .red{			
			background:#FF0000;						
		}
		.stateInfo .white{
			background:#000000;
		}
		.stateInfo .green{			
			background:#009900;			
		}
		.stateInfo .orange{			
			background:#DAA520;			
		}
		.stateInfo .gray{			
			background:#808080;
			border:1px solid #e2e4e9;
			margin-right:0;
		}
		.sc-layout-label--auto:last-child>tr:first-child>td:first-child{
			vertical-align:middle;
		}
		.el-form-item.is-error .el-input.is-disabled .el-input__inner{
			border-color:#ff4949!important;
		}
		.mini-splitter-border,.mini-splitter-pane1,.mini-splitter-pane2{
			border:0;
		}
		.sc-formgroup__title.sign{
			    padding: 3px 6px  !important;
		}
		.sc-formgroup__content{
			    padding: 6px 6px 0 6px !important;
		}
		.el-dialog__body>.el-form>.sc-formgroup:first-child{
			margin-top:0;
		}
		.add-mng .el-dialog .el-dialog__body{
			    padding: 0px 6px 6px !important;
    			max-height: 530px !important;
		}
		.el-table__body-wrapper{
			z-index:1;
		} 
		
		.taDataShow td .cell{
				color: red!important;
		}	
		.el-table .blue{			
			color:blue;	
		}
		/* .renderHeaderClass {
			color: blue;
			text-decoration: underline;
			cursor: pointer;
		} */
    </style>
</head>
<body>
 <div id="app" class="sc-theme is-standard sc-box-content-app" v-cloak>
<sc-form-layout class="sc-box-content sc-box-conten-search">
         <sc-form-layout-row>
            <!-- :model  绑定查询对象  |  label='' 设置label  |  width="standard" 布局规范之一  |   -->
            <sc-form-layout-col>
                <el-form :model="queryConditions">
                    <sc-form-layout class="bmargin">
                        <sc-form-layout-row>
                            <sc-form-layout-col >
                                <el-button type="primary" @click="onQuery" v-cloak>刷新</el-button>
                                <el-button type="primary" @click="queryBankHandleInfo" v-cloak>查询更新</el-button>
                                <el-button type="primary" @click="onSure('1')" v-cloak>确认</el-button>  
                                <el-button type="primary" @click="send" v-cloak>发送</el-button>
                                <el-button type="primary" @click="onAdd" v-cloak>新增</el-button>
                                <el-button type="primary" @click="onEditRow" v-cloak>编辑</el-button> 	
                                <el-button type="primary" @click="onCopyRow" v-cloak>复制</el-button>							
                                <el-button type="primary" @click="onCheck" v-if="verifyDataType" v-loading.fullscreen.lock="fullscreenLoading" v-cloak>核对并勾选</el-button>    
                            
                                <el-button type="primary" @click="onSure('0')" v-cloak>退回</el-button>
                            	<el-button type="primary" @click="popRemark('revoked')" v-cloak>撤销</el-button>
                            	<el-button type="primary" @click="cancelSend" v-cloak>发送撤销</el-button>
                                <el-button type="primary" @click="popRemark('invalid')" v-cloak>作废</el-button>  
                                <el-button type="primary" @click="recycle" v-cloak>查看回收站</el-button>  
                                <el-button type="primary" @click="popRemark('stop')" v-cloak>暂停</el-button>
                                <el-button type="primary" @click="popRemark('reply')" v-cloak>恢复</el-button> 
                                <el-button type="primary" @click="popCreateTemp" v-cloak>复制为模板</el-button>  
                                <el-button type="primary" @click="downloadCheckAtta" v-cloak>下载附件</el-button>
                                <el-button type="primary" @click="popUpdateDate" v-cloak>调整划款日期</el-button>
                            	<el-button type="primary" @click="settlementQuery" v-cloak>款项交收查询</el-button>
								<el-button type="primary" v-if="showExport" @click="exportInfo" v-cloak>导出指令</el-button>
                            </sc-form-layout-col>        
                            <sc-form-layout-col align="right"  width="300px">
                                <el-form-item >
                                	 
                                    <el-button type="primary"  @click="onAdvanceQuery" v-cloak>{{actions.advanceQuery.text}}<i :class="queryShow ? 'el-icon-arrow-up el-icon--right' : 'el-icon-arrow-down el-icon--right'"></i></el-button>
                                </el-form-item>
                            </sc-form-layout-col>
                        </sc-form-layout-row>
                        </sc-form-layout>
                </el-form>
            </sc-form-layout-col>
        </sc-form-layout-row>
    </sc-form-layout> 
    <el-form  :model="queryConditions" v-show="queryShow" class="border bgcolor padding ymargin ad-query sc-box-content sc-box-content-adquery">
        <sc-form-layout class="bmargin">
            <sc-form-layout-row>
                <sc-form-layout-col>
                    <sc-form-layout>
                        <sc-form-layout-row>
                            <sc-form-layout-col align="left"  width="standard2">
                                <el-form-item label="划款类型">
                                	<a slot="label" style="color:blue;text-decoration: underline;cursor: pointer;" @click="popTransferTypeOrder">划款类型</a>
                                	<sc-select :data="transferTypeOptions" @change="selectChange" :default-props="{ label: 'ddName', nodeKey: 'ddKey' }" :default-checked="defaultChecked" show-checkbox filterable clearable></sc-select>
							    </el-form-item>
                            </sc-form-layout-col>
                            <sc-form-layout-col width="standard2">
                                <!-- <el-form-item label="托管行">
                                    <el-select v-model="queryConditions.custodianBank" clearable filterable placeholder="请选择">
                                        <el-option v-for="item in bankOptions" :label="item.bankName" :value="item.bankCode" :key="item.bankCode"></el-option>
                                    </el-select>
                                </el-form-item> -->
                                <el-form-item label="划款日期">
									<el-date-picker
											ref="dateRange"
											v-model="queryConditions.dateRange"
											type="daterange"
											align="right"
											@change="onDateRangeChange($event, queryConditions, 'bizDateB', 'bizDateE')"
											placeholder="选择日期范围">
									</el-date-picker>
								</el-form-item>
                            </sc-form-layout-col>
                            <sc-form-layout-col width="standard2">
                                <el-form-item label="机构类型">
                                    <el-select v-model="queryConditions.orgType" clearable filterable placeholder="请选择" @change="orgTypeChange($event)">
                                        <el-option v-for="item in orgTypeOptions" :label="item.ddName" :value="item.ddKey" :key="item.ddKey"></el-option>
                                    </el-select>
                                </el-form-item>
                            </sc-form-layout-col>
                            <sc-form-layout-col width="standard2"> 
                                <el-form-item label="机构名称">
                                    <el-select v-model="queryConditions.orgId" clearable filterable placeholder="请选择" no-data-text="请先选择机构类型" >
                                        <el-option v-for="item in queryOrgNameOptions" :label="item.orgName" :value="item.id" :key="item.id"></el-option>
                                    </el-select>
                                </el-form-item>
                            </sc-form-layout-col>
                        </sc-form-layout-row>
                    </sc-form-layout>
                </sc-form-layout-col>
            </sc-form-layout-row>
        </sc-form-layout>
        <sc-form-layout class="bmargin">
            <sc-form-layout-row>
                <sc-form-layout-col>
                    <sc-form-layout>
                        <sc-form-layout-row>
                            <sc-form-layout-col width="standard2">
                                <el-form-item label="资产组合">
                                
	                    			<!-- 产品树 -->
					                <!-- <sc-select-tree
					                  :data="porductData"
					                  :show-checkbox="true"  :default-all-check="false"   :node-key="productProps.nodeKey" filterable  clearable
					                  :props="productProps"
					                  @change="onSelectTreeChange"
					                  ref="selectTree-queryConditions"
					                  :default-checked-group="defTreeArrChecked" >
					                </sc-select-tree>	 -->
					                 <select-tree
					                    show-checkbox
					                    ref="tree"
					                    :data="porductData"
					                    @change="onSelectTreeChange"
					                    :open-nodes="openNodes"
					                    filterable
					                    clearable
					                    :default-props="treeDefaultProps">
					                  </select-tree>							        
	                			</el-form-item>
                            </sc-form-layout-col> 
                            <sc-form-layout-col width="150px">
                            	<el-row>
								  <!-- <el-col :span="12" style='text-align: center;'><el-checkbox v-model="queryConditions.showHasDo">显示已处理指令</el-checkbox></el-col> -->
								  <el-col :span="12" style='text-align: center;'><el-checkbox v-model="queryConditions.showHasCancel">显示已撤销指令</el-checkbox></el-col>
								</el-row>
                            </sc-form-layout-col>
							 <sc-form-layout-col width="150px" v-if="showExport">
                            	<el-row>
								  <el-col :span="12" style='text-align: center;'><el-checkbox v-model="queryConditions.excludeExportedCheck">过滤已导出指令</el-checkbox></el-col>
								</el-row>
                            </sc-form-layout-col>
							<sc-form-layout-col width="150px"> 
								<el-form-item label="" v-if="actions.showAll.visible">
									<el-checkbox v-model="queryConditions.showAll">显示全部指令</el-checkbox>
								</el-form-item>
							</sc-form-layout-col>
                            <sc-form-layout-col>
			                    <sc-form-layout>
			                        <sc-form-layout-row>
			                            
			                            <sc-form-layout-col align="right"  class="sc-button-resetQuery">
			                                <el-button type="primary" @click="onQuery" v-cloak>{{actions.query.text}}</el-button>
			                                <el-button @click="onReset"  v-cloak>{{actions.reset.text}}</el-button>
			                            </sc-form-layout-col>
			                        </sc-form-layout-row>
			                    </sc-form-layout>
			                </sc-form-layout-col>
                        </sc-form-layout-row>
                    </sc-form-layout>
                </sc-form-layout-col>
            </sc-form-layout-row>
        </sc-form-layout>
    </el-form>
    
    <!-- 动态列 弹窗 -->
     <div :style="miniStyle">
      <div class="mini-splitter" id="mini-splitter" :style="miniStyle" :height="tableHeight+30">
    <div id="leftTable" :style="leftStyle"  size="75%" showCollapseButton="true">
    <sc-table-config :config="config" @applyconfig="applyconfig" ref="tableConfig" :origin-data="originData" ></sc-table-config>
    	<el-table
    		ref="multipleTable" 
    		:row-class-name="tableRowClassName"
			:data="tableData" v-loading="loading" highlight-current-row 
            @sort-change="onSort"
            @selection-change="onSelectionChange($event)"
            fit
            border
            stripe
            highlight-current-row
            @row-click="onRowClick"
            style="width:100%"
            :height="tableHeight" :config-columns="configColumns"  :show-config-table="true" @openconfigtable="openconfigtable"  @cell-mouse-enter = "findPopDate">
			<el-table-column type="selection"  width="26"    align="center" header-align="center" origin-id="checkBox" ></el-table-column>
			<el-table-column
		        fixed				
		        prop="transferType"
		        label="划款类型"
		        sortable="custom"
		        header-align="center"
		        min-width="170"
		        show-overflow-tooltip
		        origin-id="transferType"
		        align="center"
		        :render-header="renderHeader"
		        >
		        <template scope="scope">
		        	<div v-if="checkStatus(scope.row,'DVP')">
			        	<el-popover trigger="hover" placement="right">
				        	<p style="font-size:12px;"><b>成交单信息：</b></p>
				        	<div style="margin-top: 10px;" >
				        	 <el-table :data="dealInfo" height="400">
							    <el-table-column width="150" property="dealNo" label="成交编号:"></el-table-column>
							    <el-table-column width="100" property="bizType" label="业务类型:"></el-table-column>
							    <el-table-column width="160" :formatter="formatter" align="right" property="dealAmount" label="结算金额(元):"></el-table-column>
							  </el-table>
        					</div>
				        	<div slot="reference">
				            	<span style="color:blue;">{{ scope.row.transferType}}</span>
				            </div>       	         	
			           </el-popover> 
		            </div> 
		            <div v-if="checkStatus(scope.row,'TA')">
						<el-popover trigger="hover" placement="right">
				        	<p style="font-size:12px;"><b>TA元数据详情：</b></p>
				        	<div style="margin-top: 10px;" >
					        	<el-table :data="taDataInfo" height="400"  :row-class-name="taDataRowClassName" > 
									<el-table-column width="150" property="taType" label="业务类型:"></el-table-column>
									<el-table-column width="100" property="fnetid" label="网点:"></el-table-column>
									<el-table-column width="150" :formatter="formatter" property="fdate" label="申请日期:"></el-table-column>
									<el-table-column width="100" property="carryDownDays" label="结转天数:"></el-table-column>
									<el-table-column width="160" :formatter="formatter" align="right" property="amount" label="金额(元):"></el-table-column>
								</el-table>
        					</div>
				        	<div slot="reference">
				            	<span style="color:blue;">{{ scope.row.transferType}}</span>
				            </div>       	         	
			           </el-popover>		            
		            </div> 
		            <div v-if="checkStatus(scope.row,'OTHER')">
		            	<div slot="reference">
				        	<span style="color:black;">{{ scope.row.transferType}}</span>
				        </div>
		            </div>
		        </template>		        
	        </el-table-column>
	        <!-- <el-table-column
		        prop="prdCode"
		        label="基金代码"
		        sortable="custom"
		        header-align="center"
		        min-width="150"
		        show-overflow-tooltip
		        align="center">
	        </el-table-column> -->
	        <el-table-column
		        prop="prdName"
		        label="基金信息"
		        sortable="custom"
		        header-align="left"
		        min-width="300"
		        show-overflow-tooltip
		        origin-id="prdName"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="payeeAcctName"
		        label="收款人"
		        sortable="custom"
		        header-align="left"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="payeeAcctName"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="payeeAcctNo"
		        label="收款人账户"
		        sortable="custom"
		        header-align="left"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="payeeAcctNo"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="payeeAcctBankName"
		        label="收款人开户行"
		        sortable="custom"
		        header-align="left"
		        min-width="220"
		        show-overflow-tooltip
		        origin-id="payeeAcctBankName"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="payeeLargePayNo"
		        label="收款人支付系统号"
		        sortable="custom"
		        header-align="left"
		        min-width="170"
		        show-overflow-tooltip
		        origin-id="payeeLargePayNo"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="transferAmount"
		        label="划款金额"
		        :formatter="formatter"
		        sortable="custom"
		        header-align="right"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="transferAmount"
		        align="right">		        
		         <template scope="scope">
		            <div v-if="scope.row.checked">
		            	<div slot="reference">
				        	<span style="color:#13ce66;">{{ scope.row.transferAmount | tFormatterValue(formats.transferAmount)}}</span>
				        </div>
		            </div>
		            <div v-else>
		            	<div slot="reference">
				        	<span style="color:black;">{{ scope.row.transferAmount | tFormatterValue(formats.transferAmount)}}</span>
				        </div>
		            </div>
		        </template>
	        </el-table-column>
	        <el-table-column
		        prop="currency"
		        label="币种"
		        sortable="custom"
		        header-align="center"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="currency"
		        align="center">
	        </el-table-column>
	        <el-table-column
		        prop="auditProcessStatus"
		        label="指令状态"
		        sortable="custom"
		        header-align="center"
		        min-width="130"
		        show-overflow-tooltip
		        origin-id="auditProcessStatus"
		        align="center">
	        </el-table-column>
	        <!-- <el-table-column
		        prop="processFlag"
		        label="指令状态"
		        sortable="custom"
		        header-align="center"
		        min-width="130"
		        show-overflow-tooltip
		        align="center">
	        </el-table-column> -->
	        <!-- <el-table-column
		        prop="pauseFlag"
		        label="暂停"
		        sortable="custom"
		        header-align="center"
		        min-width="130"
		        :formatter="pauseFlagStatus"
		        show-overflow-tooltip
		        align="center">
	        </el-table-column> -->
	        <el-table-column
		        prop="bankHandleStatus"
		        label="银行处理状态"
		        sortable="custom"
		        header-align="center"
		        min-width="130"
		        show-overflow-tooltip
		        origin-id="bankHandleStatus"
		        align="center">
		        <template scope="scope">
		        	<div v-if="scope.row.bankHandleStatusCode == '202' || scope.row.bankHandleStatusCode == '9012'">
			        	<el-popover trigger="hover" placement="right">
				        	<div style="margin-top: 10px;" >
				        		<p style="font-size:12px;">
				        			<span class="popover-span3">错误信息: {{ scope.row.errorMsg}}</span>
				        		</p>
        					</div>
				        	<div slot="reference">
				            	<span style="color:blue;">{{ scope.row.bankHandleStatus}}</span>
				            </div>       	         	
			           </el-popover> 
		            </div>
		            <div v-else-if="scope.row.bankHandleStatusCode == '1'">
			        	<el-popover trigger="hover" placement="right">
				        	<div style="margin-top: 10px;" >
				        		<p style="font-size:12px;">
				        			<span class="popover-span3">作废原因: {{ scope.row.errorMsg}}</span>
				        		</p>
        					</div>
				        	<div slot="reference">
				            	<span style="color:black;">{{ scope.row.bankHandleStatus}}</span>
				            </div>       	         	
			           </el-popover> 
		            </div>
		            <div v-else>
		            	<div slot="reference">
				        	<span style="color:black;">{{ scope.row.bankHandleStatus}}</span>
				        </div>
		            </div>
		        </template>
	        </el-table-column>
	        <el-table-column
		        prop="settlementStatus"
		        label="款项交收状态"
		        sortable="custom"
		        header-align="center"
		        min-width="130"
		        show-overflow-tooltip
		        origin-id="settlementStatus"
		        align="center">
	        </el-table-column>
	        <el-table-column
		        prop="sendWay"
		        label="发送渠道"
		        sortable="custom"
		        header-align="center"
		        min-width="130"
		        show-overflow-tooltip
		        origin-id="sendWay"
		        align="center">
	        </el-table-column>
	        <el-table-column
		        prop="faxSendStatus"
		        label="传真/邮箱状态"
		        sortable="custom"
		        header-align="center"
		        min-width="130"
		        show-overflow-tooltip
		        origin-id="faxSendStatus"
		        align="center">
		        <template scope="scope">
			        <div v-if = "scope.row.sendWayCode == '00163002' || scope.row.sendWayCode == '00163005'">
			        	<div v-if = "scope.row.faxSendStatus != '-'">
				        	<el-popover trigger="hover" placement="right">
					        	<p style="font-size:12px;"><b>传真发送状态</b></p>
					        	<div style="margin-top: 10px;" >
					        	 <el-table :data="faxStatusInfo" height="400">
					        	 	<el-table-column width="130" property="toName" label="收件人"></el-table-column>
								    <el-table-column width="200" property="toNumber" label="收件号码"></el-table-column>
								    <el-table-column width="100" property="faxId" label="传真流水号"></el-table-column>
								  	<el-table-column width="150" property="faxStatus" label="当前状态"></el-table-column>
								  	<el-table-column width="160" property="updateTime" label="状态更新时间"></el-table-column>
								  	<el-table-column width="100" property="resendNum" label="重发次数"></el-table-column>
								  </el-table>
		       					</div>  
		       					<div slot="reference">
						       	  <span :class = "findFaxStatus(scope.row.faxSendStatusCode)">{{ scope.row.faxSendStatus}}</span>
						        </div>  	         	
				           </el-popover> 
			            </div> 
			            <div v-else>
			            	<div slot="reference">
					        	<span style="color:black;">{{ scope.row.faxSendStatus}}</span>
					        </div>
			            </div>
		            </div>
		            <div v-else-if = "scope.row.sendWayCode == '00163003' || scope.row.sendWayCode == '00163006'">
		            	<div v-if = "scope.row.emailSendStatus == '发送失败'">
			            	<!-- <el-popover trigger="hover" placement="right">
					        	<div style="margin-top: 10px;" >
					        		<p style="font-size:12px;">
					        			<span class="popover-span3">失败原因: {{ scope.row.emailSendErrorMsg}}</span>
					        		</p>
	        					</div>
					        	<div slot="reference">
					            	<span style="color:red;">{{ scope.row.emailSendStatus}}</span>
					            </div>       	         	
				           </el-popover> -->
				           <div slot="reference">
				            	<span style="color:red;">{{ scope.row.emailSendStatus}}</span>
				            </div>
			           </div>
			           <div v-else-if = "scope.row.emailSendStatus == '发送成功'">
			           		<div slot="reference">
				            	<span style="color:green;">{{ scope.row.emailSendStatus}}</span>
				            </div>
			           </div>
			           <div v-else><span>{{ scope.row.emailSendStatus}}</span></div>
		            </div>
		            <div v-else>
		            	<span>-</span>
		            </div>
		        </template>		        
	        </el-table-column>
	        <!-- <el-table-column
		        prop="sendStatus"
		        label="指令发送状态"
		        sortable="custom"
		        header-align="center"
		        min-width="130"
		        show-overflow-tooltip
		        align="center">
	        </el-table-column> -->
	        <el-table-column
		        prop="draweeAcctName"
		        label="付款人"
		        sortable="custom"
		        header-align="left"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="draweeAcctName"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="draweeAcctNo"
		        label="付款人账户"
		        sortable="custom"
		        header-align="left"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="draweeAcctNo"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="draweeAcctBankName"
		        label="付款人开户行"
		        sortable="custom"
		        header-align="left"
		        min-width="220"
		        show-overflow-tooltip
		        origin-id="draweeAcctBankName"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="draweeLargePayNo"
		        label="付款人大额支付号"
		        sortable="custom"
		        header-align="left"
		        min-width="170"
		        show-overflow-tooltip
		        origin-id="draweeLargePayNo"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="instructionNo"
		        label="指令编号"
		        sortable="custom"
		        header-align="center"
		        min-width="220"
		        show-overflow-tooltip
		        origin-id="instructionNo"
		        align="center">
	        </el-table-column>
	        <el-table-column
		        prop="transferDate"
		        label="划款日期"
		        sortable="custom"
		        header-align="center"
		        min-width="200"
		        :formatter="formatter"
		        show-overflow-tooltip
		        origin-id="transferDate"
		        align="center">
	        </el-table-column>
	        <el-table-column
		        prop="productionTime"
		        label="生成日期"
		        sortable="custom"
		        header-align="center"
		        min-width="200"
		        show-overflow-tooltip
		        origin-id="productionTime"
		        align="center">
	        </el-table-column>
	        <el-table-column
		        prop="sendTime"
		        label="发送时间"
		        sortable="custom"
		        header-align="center"
		        min-width="200"
		        show-overflow-tooltip
		        origin-id="sendTime"
		        align="center">
	        </el-table-column>
	        <el-table-column
		        prop="bizDateB"
		        label="开始日期"
		        sortable="custom"
		        header-align="center"
		        min-width="150"
		        :formatter="formatter"
		        show-overflow-tooltip
		        origin-id="bizDateB"
		        align="center">
	        </el-table-column>
	        <el-table-column
		        prop="bizDateE"
		        label="截止日期"
		        :formatter="formatter"
		        sortable="custom"
		        header-align="center"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="bizDateE"
		        align="center">
	        </el-table-column>
	        <el-table-column
		        prop="orgName"
		        label="机构名称"
		        sortable="custom"
		        header-align="left"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="orgName"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="seatNo"
		        label="席位信息"
		        sortable="custom"
		        header-align="left"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="seatNo"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="secCode"
		        label="证券代码"
		        sortable="custom"
		        header-align="center"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="secCode"
		        align="center">
	        </el-table-column>
	        <el-table-column
		        prop="secName"
		        label="证券名称"
		        sortable="custom"
		        header-align="left"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="secName"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="contactName"
		        label="联系人"
		        sortable="custom"
		        header-align="left"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="contactName"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="contactMobilephone"
		        label="联系电话"
		        sortable="custom"
		        header-align="left"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="contactMobilephone"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="manager"
		        label="经办人"
		        sortable="custom"
		        header-align="left"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="manager"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="reviewer"
		        label="复核人"
		        sortable="custom"
		        header-align="left"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="reviewer"
		        align="left">
	        </el-table-column>
	        <el-table-column
		        prop="approver"
		        label="审批人"
		        sortable="custom"
		        header-align="left"
		        min-width="150"
		        show-overflow-tooltip
		        origin-id="approver"
		        align="left">
	        </el-table-column>
	    </el-table>
	    <el-popover
		  ref="popover4"
		  placement="right"
		  trigger="click">
		  <el-table :data="failData" height="400">
		    <el-table-column min-width="100" show-overflow-tooltip property="mtaCode" label="资产代码"></el-table-column>
		    <el-table-column min-width="150" show-overflow-tooltip property="prdName" label="资产名称"></el-table-column>
		    <el-table-column min-width="100" show-overflow-tooltip property="transferType" label="业务类型"></el-table-column>
		    <el-table-column min-width="500" show-overflow-tooltip property="fexception" label="错误信息"></el-table-column>
		  </el-table>
		</el-popover>
		<el-popover
		  ref="popover5"
		  placement="right"
		  trigger="click">
		  <el-table :data="failAuditData" height="400">
		    <el-table-column min-width="100" show-overflow-tooltip property="prdCode" label="资产代码"></el-table-column>
		    <el-table-column min-width="150" show-overflow-tooltip property="prdName" label="资产名称"></el-table-column>
		    <el-table-column min-width="200" show-overflow-tooltip property="instructionNo" label="指令编号"></el-table-column>
		    <el-table-column min-width="500" show-overflow-tooltip property="errorMsg" label="错误信息"></el-table-column>
		  </el-table>
		</el-popover>
		<!-- 表格分页 -->
		<div>
			<div class="stateInfo">
	            	<div class="stateInfo_number">
	            		<span>错误消息：</span><span class="info_number" v-popover:popover4  @click="numberClick">{{stateInfo1}}</span>
	            	</div>
	            	<div class="stateInfo_number">
	            		<span>自动流程错误消息：</span><span class="info_number" v-popover:popover5  @click="auditNumberClick">{{auditStateInfo}}</span>
	            	</div>
	            	<div class="stateInfo_category">	  
	            		<span class="red  fontColorWhite infoStatus" >状态异常</span><!--fontColorBlack fontColorBlue fontColorRed <span class="red infoColor"></span> -->
	            		<span class="white fontColorWhite infoStatus">待处理</span><!-- <span class="white infoColor"></span>-->
	            		<span class="green fontColorWhite infoStatus">已发送</span><!-- <span class="green infoColor"></span>-->
	            		<span class="orange fontColorWhite infoStatus">已撤销</span><!-- <span class="orange infoColor"></span>-->
	            		<span class="gray  fontColorWhite infoStatus">其它状态</span><!-- <span class="gray infoColor"></span>-->
	            		
	            		&nbsp;   &nbsp; 
	            		<span class=" fontColorBlack">已经办: </span><span class="infoColor2">{{statusCountData.HANDLED_COUNT}}条</span>
	            		<span class=" fontColorBlack">已复核: </span><span class="infoColor2">{{statusCountData.CHECKED_COUNT}}条</span>
	            		<span class=" fontColorBlack">已审批: </span><span class="infoColor2">{{statusCountData.APPROVED_COUNT}}条</span>
	            		<span class=" fontColorBlack">已发送: </span><span class="infoColor2">{{statusCountData.SENDED_COUNT}}条</span>
	            	</div>
	            </div>
	            <el-pagination class="sc-box-content sc-box-content-page"
		            @size-change="onHandleSizeChange"
		            @current-change="onHandleCurrentChange"
		            :current-page="currentPage"
		            :page-sizes="pageSizes"
		            :page-size="pageSize"
		            layout="total, sizes, prev, pager, next, jumper"
		            :total="totalPage">
		</el-pagination>
		</div>
	    
    </div>

   <div id="rightForm" :style="rightStyle"  size="25%" showCollapseButton="true" visible="false">
		<div class="head">
			<el-row>
				<el-col :span="8">
					<span class="head_back icon iconfont sc-icon-revoke"></span>
					<span class="head_back" @click="back()">返回</span>
				</el-col>
				<el-col :span="16" v-cloak>
					{{insInfo.number}}
				</el-col>
			</el-row>
		</div>
		<div class="content" :style="rightContentStyle">
			<ul class="sc-list" v-if="!rightTableShow(insInfo.transferType)">
				<li>
					<el-row>
						<el-col :span="8" v-cloak>
							银行托管部名称:
						</el-col>
						<el-col :span="16"> <!---->
							<el-tooltip class="item" effect="dark"  placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.bankName}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							到账日期:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.transferDate}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row v-show="payShow(insInfo)">
						<el-col :span="8" v-cloak>
							付款人:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.draweeAcctName}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row v-show="payShow(insInfo)">
						<el-col :span="8" v-cloak>
							付款人开户行:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.draweeAcctBankName}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row v-show="payShow(insInfo)">
						<el-col :span="8" v-cloak>
							付款人账号:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.draweeAcctNo}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row v-show="payShow(insInfo)">
						<el-col :span="8" v-cloak>
							付款人支付系统号:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.draweeLargePayNo}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							收款人:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.payeeAcctName}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							收款人开户行:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.payeeAcctBankName}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							收款人账号:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.payeeAcctNo}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							收款人支付系统号:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.payeeLargePayNo}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							划款金额(小写):
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.transferAmount | formatterValue(formats.transferAmount)}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							划款金额(大写):
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.transferAmountCn}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							划款用途:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.transferUse}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							划款备注:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.transferRemark}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
				</li>
			</ul>
			<ul class="sc-list" v-if="rightTableShow(insInfo.transferType)">
				<li>
					<el-row>
						<el-col :span="8" v-cloak>
							银行托管部名称:
						</el-col>
						<el-col :span="16"> <!---->
							<el-tooltip class="item" effect="dark"  placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.bankName}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							付款时间:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.transferDate}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row v-show="payShow(insInfo)">
						<el-col :span="8" v-cloak>
							付款账户名:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.draweeAcctName}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row v-show="payShow(insInfo)">
						<el-col :span="8" v-cloak>
							付款开户行:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.draweeAcctBankName}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row v-show="payShow(insInfo)">
						<el-col :span="8" v-cloak>
							付款账号:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.draweeAcctNo}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row v-show="payShow(insInfo)">
						<el-col :span="8" v-cloak>
							付款金额（小写）:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.currency}} {{insInfo.transferAmount | tFormatterValue(formats.transferAmount)}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							付款金额（大写）:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.transferAmountCn}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							收款时间:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.transferDate}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							收款账户名:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.payeeAcctName}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							收款开户行:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.payeeAcctBankName}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							收款账号:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.payeeAcctNo}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							收款金额（小写）:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.payeeCurrency}} {{insInfo.payeeAmount | tFormatterValue(formats.payeeAmount)}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							收款金额（大写）:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.payeeAmountCn}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							划款用途:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.transferUse}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
					<el-row>
						<el-col :span="8" v-cloak>
							注意事项:
						</el-col>
						<el-col :span="16">
							<el-tooltip class="item" effect="dark" placement="left-start" :disabled="tooltip">
								<span v-cloak>{{insInfo.transferRemark}}</span>
							</el-tooltip>
						</el-col>
					</el-row>
				</li>
			</ul>
			<ul class="footer">
				<li>
					<el-row>
						<el-col :span="24">
							<span v-cloak>经办人:</span>
							<span v-cloak>{{insInfo.handler}}</span>
							<span v-cloak>{{insInfo.handleTime}}</span>
						</el-col>
					</el-row>
				</li>
				<li v-show="insInfo.hasReviewer">
					<el-row>
						<el-col :span="24">
							<span v-cloak>复核人:</span>
							<span v-cloak>{{insInfo.reviewer}}</span>
							<span v-cloak>{{insInfo.reviewerTime}}</span>
						</el-col>
					</el-row>
				</li>

				<li>
					<el-row>
						<el-col :span="24">
							<span v-cloak>审批人:</span>
							<span v-cloak>{{insInfo.approver}}</span>
							<span v-cloak>{{insInfo.approverTime}}</span>
						</el-col>
					</el-row>
				</li>
				<!-- <li>
					<el-row>
						<el-col :span="24">
							<span v-cloak>确认人:</span>
							<span v-cloak>{{insInfo.confirmor}}</span>
							<span v-cloak>{{insInfo.confirmorTime}}</span>
						</el-col>
					</el-row>
				</li> -->
			</ul>
			<div style="margin-bottom: 10px">
				<el-button type="primary" @click="popUploadForm" v-cloak>上传</el-button>
				<el-button type="primary" @click="batchDownload" v-cloak>下载</el-button>
				<el-button type="primary" @click="batchDelAtta" v-cloak>删除</el-button>
				<el-button type="primary" @click="sendAttaFile" v-cloak>发送附件</el-button>
			</div>
			<el-table
				:data="attaInfo"
	            fit
	            border
	            highlight-current-row
	            @cell-dblclick="celldblclick"
	            :row-class-name="fileTableRowClassName"
	            @selection-change="onAttaSelectionChange($event)"
	            style="width:100%"
	            height="200">
            	<el-table-column type="selection" header-align="center" align="center" width="26"></el-table-column>
		        <el-table-column
	                prop="attaName"
	                label="文件名"
	                header-align="center"
		        	show-overflow-tooltip
	                align="center">
		        </el-table-column>
		        <el-table-column
	                prop="attaType"
	                label="附件类型"
		        	show-overflow-tooltip
	                header-align="center"
	                align="center">
		        </el-table-column>
		        <el-table-column
	                prop="createTime"
	                label="操作"
	                header-align="center"
	                min-width="100"
		        	show-overflow-tooltip
	                align="center">
	                <template scope="scope"><!-- fixed="right" -->
		                <!-- 查看 -->
						<el-tooltip :enterable="tooltipEnterable" class="item" effect="light" content="预览" placement="left">
							<el-button @click.native.prevent="onPreView(scope.$index, attaInfo)" type="text" size="small"> 
								<i :class="actions.read.icon"></i>
							</el-button>
						</el-tooltip>
		              	<!-- 下载 -->
		              	<el-tooltip class="item" :enterable="tooltipEnterable" effect="light" :content="actions.upload.text">
		                 	<el-button @click.native.prevent="onDownloadFile(scope.$index, attaInfo)" type="text" size="small">
		                    	<i :class="actions.upload.icon"></i>
		                </el-button>  
		              	</el-tooltip>
		              	<!-- 编辑 -->               
		              	<el-tooltip class="item" :enterable="tooltipEnterable" effect="light" :content="actions.edit.text" v-if="toolShow(scope.row,'edit')">  
		                	<el-button @click.native.prevent="onEditFile(scope.$index, attaInfo)" type="text" size="small">
		                    	<i :class="actions.edit.icon"></i>
		                	</el-button>
		              	</el-tooltip>
		              	<!-- 删除 -->
		              	<el-tooltip class="item" :enterable="tooltipEnterable" effect="light" :content="actions.del.text" v-if="toolShow(scope.row,'delete')">                    
		               		<el-button @click.native.prevent="onDeleteFile(scope.$index, attaInfo)" type="text" size="small">
		                    	<i :class="actions.del.icon" ></i>
		                	</el-button>
		              	</el-tooltip>
		            </template>
		        </el-table-column>
	    	</el-table>
	    	<el-table
			:data="statusInfo"
            fit
            border
            style="width:100%"
            height="200">
		        <el-table-column
	                prop="operationType"
	                label="操作"
		        	show-overflow-tooltip
	                header-align="center"
	                align="center">
		        </el-table-column>
		        <el-table-column
	                prop="operation"
	                label="操作人"
		        	show-overflow-tooltip
	                header-align="center"
	                align="center">
		        </el-table-column>
		        <el-table-column
	                prop="operationDec"
	                label="操作说明"
		        	show-overflow-tooltip
	                header-align="center"
	                align="center">
		        </el-table-column>
		        <!-- <el-table-column
	                prop="operationTime"
	                label="操作时间"
	                header-align="center"
	                align="center">
		        </el-table-column> -->
	    	</el-table>
		</div>
    </div>
    </div>
    </div>
	 <!-- 指令模板选择弹出框  formData-->
    <el-dialog title="模板选择" v-model="dialogFormVisible" class="sc-normal" @close="onCancel"  :close-on-click-modal="false">               
        <el-form :model="formData" ref="formData">        
       		<sc-form-layout   label-width="normal" class="ypadding">
       			<sc-form-layout-row>
       				<sc-form-layout-col>
	
					</sc-form-layout-col>
					<sc-form-layout-col width="standard">
						<el-form-item>
							<el-input :on-icon-click="onPoPQuery" 
							:icon="actions.advanceQuery.icon" 
							v-model="popQueryConditions.templateName" 
							placeholder="请输入模板名称" 
							:style="fqInputStyle" 
							class="sc-input__radius"></el-input>
						</el-form-item>
					</sc-form-layout-col>
					<sc-form-layout-col align="right"width="180px">
						<el-button type="primary" @click="createIns" v-cloak>确定</el-button>
	            		<el-button @click="onCancel" v-cloak>{{actions.cancel.text}}</el-button>
					</sc-form-layout-col>
       			</sc-form-layout-row>
       			<sc-form-layout-row>
       				<sc-form-layout-col colspan="3">
       					<el-table
						:data="tempData"
			            fit
			            border
			            highlight-current-row
			            @row-click="onTempClick"
			            style="width:100%"
			            height="200">
				            <el-table-column 
					        		type="index" 
					        		show-overflow-tooltip 
					        		label="序号" 
					        		width="100" 
					        		:header-align="tableColumnLayOut.headerAlign" 
					        		align="center">
					        </el-table-column>
					        <el-table-column
					                prop="templateName"
					                label="模板名称"
					                header-align="center"
					                align="center">
					        </el-table-column>
					        <el-table-column
					                prop="creater"
					                label="创建人"
					                header-align="center"
					                align="center">
					        </el-table-column>
					        <el-table-column
					                prop="createTime"
					                label="创建时间"
					                header-align="center"
					                align="center">
					        </el-table-column>
				    	</el-table>
				    	<!-- 表格分页 -->
					   <el-pagination
					            @size-change="onHandleSizeChange2"
					            @current-change="onHandleCurrentChange2"
					            :current-page="currentPage2"
					            :page-sizes="pageSizes2"
					            :page-size="pageSize2"
					            layout="total, sizes, prev, pager, next, jumper"
					            :total="totalPage2">
					    </el-pagination> 
       				</sc-form-layout-col>
       			</sc-form-layout-row>
       		</sc-form-layout>    
        </el-form>              
    </el-dialog>
    <!-- 编辑弹出框 formData2-->
    <el-dialog :title="dialogTitle" v-model="dialogFormVisible2" class="sc-middle add-mng" @close="onCancel2"  :close-on-click-modal="false">
    	<el-form :model="formData2" ref="formData2" label-width="small">
            	<sc-form-group title="指令基本要素">
        		<sc-form-layout label-width="normal" class="ypadding" style="padding-bottom:0px">
					<sc-form-layout-row>
						<sc-form-layout-col>
							 <el-form-item label="资产组合" prop="prdId" :rules="[{ required: true, message: '资产组合不能为空'}]">
                    			<!-- 产品树 -->
				                <sc-select-tree
				                  :data="singlProductData"
								  				:disabled="state2.prdId"
				                  :show-checkbox="false" :default-checked-group="defTreeArrChecked"  :node-key="productProps.nodeKey" filterable  clearable
				                  :props="productProps"
				                  @clear="clearTree"
				                  @change="onSelectTreeChange($event, 'formData2')"
				                  ref="selectTree-formData2"
				                    >
				                </sc-select-tree>		
							</el-form-item>
	               		</sc-form-layout-col>
						<sc-form-layout-col>
							<el-form-item label="划款类型" prop="transferType" :rules="[{ required: true, message: '划款类型不能为空'}]">
								<el-select :disabled="state2.transferType" v-model="formData2.transferType" clearable filterable placeholder="请选择划款类型" @clear="clearTransferType" @change="transferTypeChange($event)">
									<el-option v-for="item in transferTypeOptions" :label="item.ddName" :value="item.ddKey" :key="item.ddKey"></el-option>
								</el-select>
							</el-form-item>
						</sc-form-layout-col>
						<sc-form-layout-col >
							<el-form-item label="划款日期" cols="1" prop="transferDate" :rules="[{ required: true, message: '划款日期不能为空'}]">
								<el-date-picker 
									:disabled="state2.transferDate" 
									@change="onDateChange($event,formData2)" 
									v-model="formData2.transferDate" 
									type="date" 
									placeholder="选择日期">
								</el-date-picker>
							</el-form-item>
						</sc-form-layout-col>
	               	</sc-form-layout-row> 
	               	<sc-form-layout-row>
	               		<!-- <sc-form-layout-col>
	               			<el-form-item label="银行总行" prop="custodianBank">
			                    <el-select v-model="formData2.custodianBank" clearable filterable placeholder="请选择总行">
			                        <el-option v-for="item in bankOptions" :label="item.bankName" :value="item.bankCode" :key="item.bankCode"></el-option>
			                    </el-select>
			                </el-form-item>
	               		</sc-form-layout-col> -->
	               	</sc-form-layout-row>	
	               	<sc-form-layout-row v-if="state2.payeeAmountAndCurrency">
	               		<sc-form-layout-col>
							<el-form-item label="收款金额" :rules="[ { required: true, message: '收款金额不能为空'}]" prop="payeeAmount">
								<el-input v-model="formData2.payeeAmount" amount="true" auto-complete="off" @change="transferAmountFormat(1)"></el-input>
							</el-form-item>
						</sc-form-layout-col>
						<sc-form-layout-col colspan="2">
							<el-form-item label="金额大写" prop="bigPayeeAmount">
								<el-input type="text" :disabled="true" v-model="formData2.bigPayeeAmount" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
					</sc-form-layout-row>
	               	<sc-form-layout-row>
	               		
	               		<sc-form-layout-col>
							<el-form-item :label="transferAmountLabelText" :rules="[ { required: true, message: '划款金额不能为空'}]" prop="transferAmount">
								<el-input :disabled="state2.transferAmount" v-model="formData2.transferAmount" amount="true" auto-complete="off" @change="transferAmountFormat(0)"></el-input>
							</el-form-item>
						</sc-form-layout-col>
						<sc-form-layout-col colspan="2">
							<el-form-item label="金额大写" prop="bigTransferAmount">
								<el-input type="text" :disabled="true" v-model="formData2.bigTransferAmount" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
	               	</sc-form-layout-row>
	               	<sc-form-layout-row>
	               		<sc-form-layout-col colspan="3">
							<el-form-item label="划款用途" prop="transferUse" :rules="[ { required: true, message: '划款用途不能为空'}]">
								<el-input type="textarea" :rows="2" :disabled="state2.transferUse" v-model="formData2.transferUse" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
					</sc-form-layout-row>
	               	<sc-form-layout-row>
	               		<sc-form-layout-col colspan="3">
							<el-form-item label="划款备注" prop="transferRemark" :rules="[ { required: true, message: '划款备注不能为空'}]">
								<el-input type="textarea" :rows="2" :disabled="state2.transferRemark" v-model="formData2.transferRemark" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
					</sc-form-layout-row>
	            </sc-form-layout>
	            </sc-form-group>
            	<sc-form-group title="收款人信息">
				<sc-form-layout label-width="normal" class="ypadding" style="padding-bottom:0px">
					<sc-form-layout-row>						
						<sc-form-layout-col>
							<el-form-item label="收款账号" prop="payeeAcctNo" :rules="[{ required: true, message: '收款账号不能为空'}]">
								<el-input :disabled="state2.payeeAcctNo" v-model="formData2.payeeAcctNo" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
							<sc-form-layout-col>
							<el-form-item label="收款人" prop="payeeAcctName">
								<el-input :disabled="state2.payeeAcctName" v-model="formData2.payeeAcctName" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>

						<sc-form-layout-col>
							<el-form-item label="收款开户行" prop="payeeAcctBankName" :rules="[{ required: true, message: '收款开户行不能为空'}]">
								<el-input :disabled="state2.payeeAcctBankName" v-model="formData2.payeeAcctBankName" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
					</sc-form-layout-row>
					<sc-form-layout-row>
						<sc-form-layout-col>
							<el-form-item label="支付系统号" prop="payeeLargePayNo">
								<el-input :disabled="state2.payeeLargePayNo" v-model="formData2.payeeLargePayNo" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
						<sc-form-layout-col>
							<el-form-item label="联行号" prop="payeeUniteCode">
								<el-input :disabled="state2.payeeUniteCode" v-model="formData2.payeeUniteCode" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
						<sc-form-layout-col >
		               		<el-form-item label="币种" prop="payeeCurrency" :rules="[{ required: true, message: '收款币种不能为空'}]">
								<el-select :disabled="state2.payeeCurrency" v-model="formData2.payeeCurrency" clearable placeholder="请选择币种">
									<el-option v-for="item in currencyOptions" :label="item.ddName" :value="item.ddKey" :key="item.ddKey"></el-option>
								</el-select>
							</el-form-item>
						</sc-form-layout-col>
					</sc-form-layout-row>
					<sc-form-layout-row>
						<sc-form-layout-col colspan="3" align="right">
							<el-button :disabled="state2.btnSelectPayee" type="primary" @click="popAcctInfo('payee')" v-cloak style="margin-bottom:5px">选择账户</el-button>
						</sc-form-layout-col>
					</sc-form-layout-row>
				</sc-form-layout>
				</sc-form-group>
            	<sc-form-group title="付款人信息">
				<sc-form-layout label-width="normal" class="ypadding" style="padding-bottom:0px">
					<sc-form-layout-row>							
						<sc-form-layout-col>
							<el-form-item label="付款账号" prop="draweeAcctNo" :rules="[{ required: true, message: '收款账号不能为空'}]">
								<el-input :disabled="state2.draweeAcctNo" v-model="formData2.draweeAcctNo" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
						<sc-form-layout-col>
							<el-form-item label="付款人" prop="draweeAcctName">
								<el-input :disabled="state2.draweeAcctName" v-model="formData2.draweeAcctName" value="formData2.payer" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
						<sc-form-layout-col>
							<el-form-item label="付款开户行" cols="1" prop="draweeAcctBankName" :rules="[{ required: true, message: '付款开户行不能为空'}]">
								<el-input :disabled="state2.draweeAcctBankName" v-model="formData2.draweeAcctBankName" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
					</sc-form-layout-row>
					<sc-form-layout-row>
						<sc-form-layout-col>
							<el-form-item label="支付系统号" cols="1" prop="draweeLargePayNo">
								<el-input :disabled="state2.draweeLargePayNo" v-model="formData2.draweeLargePayNo" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
						<sc-form-layout-col>
							<el-form-item label="联行号" cols="1" prop="draweeUniteCode">
								<el-input :disabled="state2.draweeUniteCode" v-model="formData2.draweeUniteCode" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
						<sc-form-layout-col>
		               		<el-form-item :label="currencyLabelText" prop="currency" :rules="[{ required: true, message: '币种不能为空'}]">
								<el-select :disabled="state2.currency" v-model="formData2.currency" clearable placeholder="请选择币种">
									<el-option v-for="item in currencyOptions" :label="item.ddName" :value="item.ddKey" :key="item.ddKey"></el-option>
								</el-select>
							</el-form-item>
						</sc-form-layout-col>
					</sc-form-layout-row>
					<sc-form-layout-row>
						<sc-form-layout-col colspan="3" align="right">
							<el-button :disabled="state2.btnSelectDrawee" type="primary" @click="popAcctInfo('payer')" v-cloak style="margin-bottom:5px">选择账户</el-button>
						</sc-form-layout-col>
					</sc-form-layout-row>
				</sc-form-layout>
				</sc-form-group>
				<sc-form-group title="其他信息">	
				<sc-form-layout label-width="normal" class="ypadding" style="padding-bottom:0px">
					<sc-form-layout-row>
						<sc-form-layout-col>
							<el-form-item label="机构名称" prop="orgId">
								<el-select :disabled="state2.orgId" v-model="formData2.orgId" clearable filterable placeholder="请选择机构" @change="orgChange($event)">
									<el-option v-for="item in orgNameOptions" :label="item.orgName" :value="item.id" :key="item.id"></el-option>
								</el-select>
							</el-form-item>
						</sc-form-layout-col>
						<sc-form-layout-col>
							<el-form-item label="日期范围">
								<el-date-picker
										:disabled="state2.dateRange"
										ref="dateRange"
										v-model="formData2.dateRange"
										type="daterange"
										align="right"
										@change="onDateRangeChange($event, formData2, 'bizDateB', 'bizDateE')"
										placeholder="选择日期范围">
								</el-date-picker>
							</el-form-item>
						</sc-form-layout-col>
						<sc-form-layout-col>
							<el-form-item label="证券代码" cols="1" prop="secCode">
								<el-input :disabled="state2.secCode" v-model="formData2.secCode" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>
					</sc-form-layout-row>
					<sc-form-layout-row>
						<sc-form-layout-col>
							<el-form-item label="证券名称" cols="1" prop="secName">
								<el-input :disabled="state2.secName" v-model="formData2.secName" auto-complete="off"></el-input>
							</el-form-item>
						</sc-form-layout-col>

						<sc-form-layout-col colspan="2">
							<el-form-item label="席位号" cols="1" prop="seatNo">
								<el-select v-model="formData2.seatNo" placeholder="请选择" :disabled="state2.seatNo" :filter-method="inputFilter" clearable filterable>
								    <el-option class="sc-multiselect" value="">
									    <ul>
										    <li @click="toggle($event)">
										    	<el-checkbox  v-model="allChecked" @change="onChange($event,null,-1)">{{allText}}</el-checkbox>                
										    </li>
										    <li v-for="(item,index) in datas" @click="toggle($event)">
										    	<el-checkbox  v-model="item.checked" @change="onChange($event,item,index)">{{ item.seatName }}</el-checkbox>                
										    </li>
									    </ul>
								    </el-option>
							    </el-select>
						    </el-form-item>
						</sc-form-layout-col>
					</sc-form-layout-row>
				</sc-form-layout>		
				</sc-form-group>		
		</el-form>
		<div slot="footer" class="dialog-footer">
			<el-button type="primary" v-if="!state2.choseTem" @click="popAcctTable" v-cloak="">选择模板</el-button>
			<el-button v-if="!state2.btnSave" type="primary" @click="onSubmit('formData2')" v-cloak="">{{actions.save.text}}</el-button>
			<el-button @click="onCancel2" v-cloak="">{{actions.cancel.text}}</el-button>
		</div>
    </el-dialog>
     <!-- 账户选择 弹出框  formData3-->
    <el-dialog title="账号选择" v-model="dialogFormVisible3" class="sc-normal acct-dialog" @close="onCancel3"  :close-on-click-modal="false">
        <el-form :model="formData3" ref="formData3" >        
       		<sc-form-layout   label-width="normal" class="ypadding">
       			<sc-form-layout-row  class="acct-type">
       				<sc-form-layout-col>  <!-- 00084 -->
						<el-form-item label="账户类型" prop="acctType">
							<el-select v-model="acctQueryConditions.acctType" clearable placeholder="请选择账户类型">
								<el-option v-for="item in acctTypeOptions" :label="item.ddName" :value="item.ddKey" :key="item.ddKey"></el-option>
							</el-select>
						</el-form-item>
					</sc-form-layout-col>
					<sc-form-layout-col>
							<el-input :on-icon-click="onAcctQuery" 
							:icon="actions.advanceQuery.icon" 
							v-model="acctQueryConditions.qSearch" 
							placeholder="请输入账户/名称" 
							style="width:100%" 
							class="sc-input__radius"></el-input>
					</sc-form-layout-col>
       			</sc-form-layout-row>
       		</sc-form-layout>
       		<sc-form-layout label-width="normal" class="ypadding">
       			<sc-form-layout-row>
       				<sc-form-layout-col colspan="2">
       					<el-table
						:data="acctData"
			            fit
			            border
			            highlight-current-row
			            @row-click="onAcctClick"
			            style="width:100%"
			            height="275">
				            <el-table-column 
					        		type="index" 
					        		show-overflow-tooltip 
					        		label="序号" 
					        		width="100" 
					        		:header-align="tableColumnLayOut.headerAlign" 
					        		align="center">
					        </el-table-column>
					        <el-table-column
					                prop="acctName"
					                label="账户名称"
					                header-align="center"
					                show-overflow-tooltip
					                align="center">
					        </el-table-column>
					        <el-table-column
					                prop="acctCode"
					                label="账户号"
					                header-align="center"
					                show-overflow-tooltip
					                align="center">
					        </el-table-column>
					        <el-table-column
					                prop="openAcctBrbankName"
					                label="开户行"
					                header-align="center"
					                show-overflow-tooltip
					                align="center">
					        </el-table-column>
					        <el-table-column
					                prop="largePayNo"
					                label="支付系统号"
					                header-align="center"
					                show-overflow-tooltip
					                align="center">
					        </el-table-column>
					        <el-table-column
					                prop="orgName"
					                label="机构名称"
					                show-overflow-tooltip
					                header-align="center"
					                align="center">
					        </el-table-column>
					        <el-table-column
					                prop="seatNo"
					                label="席位信息"
					                header-align="center"
					                show-overflow-tooltip
					                align="center">
					        </el-table-column>
					        <el-table-column v-if="false"
					                prop="currency"
					                label="币种"
					                header-align="center"
					                show-overflow-tooltip
					                align="center">
					        </el-table-column>
				    	</el-table>
				    	<!-- 表格分页 -->
					    <el-pagination class="sc-box-content sc-box-content-page"
					            @size-change="onHandleSizeChange3"
					            @current-change="onHandleCurrentChange3"
					            :current-page="currentPage3"
					            :page-sizes="pageSizes3"
					            :page-size="pageSize3"
					            layout="total, sizes, prev, pager, next, jumper"
					            :total="totalPage3">
					    </el-pagination>
       				</sc-form-layout-col>
       			</sc-form-layout-row>
			</sc-form-layout>            
        </el-form>              
        <!-- 表单底部 -->
        <div slot="footer" class="dialog-footer">
            <el-button type="primary" @click="onCheckAcct" v-cloak>{{actions.save.text}}</el-button>
            <el-button @click="onCancel3" v-cloak>{{actions.cancel.text}}</el-button>
        </div>
    </el-dialog>
    <!-- 进行指令操作时 需要填写操作说明  formData4-->
    <el-dialog :title="formData4title" v-model="dialogFormVisible4" class="sc-normal" @close="onCancel4"  :close-on-click-modal="false">               
        <el-form :model="formData4" ref="formData4" >        
       		<sc-form-layout	label-width="normal" class="ypadding">
       			<sc-form-layout-row>
       				<sc-form-layout-col>
						<el-form-item :label="formData4lable" prop="remark" :rules="[{ required: true, message: '原因不能为空'}]">
							<el-input v-model="formData4.remark" auto-complete="off" type="textarea" rows="3"></el-input>
						</el-form-item>
       				</sc-form-layout-col>
       			</sc-form-layout-row>
       		</sc-form-layout>    
        </el-form> 
        <!-- 表单底部 -->
        <div slot="footer" class="dialog-footer">
            <el-button type="primary" @click="onChangeStates" v-cloak>{{actions.save.text}}</el-button>
            <el-button @click="onCancel4" v-cloak>{{actions.cancel.text}}</el-button>
        </div>             
    </el-dialog>
    <!-- 复制为模板 弹出框  formData5-->
    <el-dialog title="复制为模板" v-model="dialogFormVisible5" class="sc-normal" @close="onCancel5"  :close-on-click-modal="false">               
        <el-form :model="formData5" ref="formData5" >        
       		<sc-form-layout   label-width="normal" class="ypadding">
       			<sc-form-layout-row>
       				<sc-form-layout-col>
       					<el-form-item label="模板名称" prop="templateName" :rules="[{ required: true, message: '模板名称不能为空'}]">	 
			                <el-input v-model="formData5.templateName" auto-complete="off" ></el-input>
			            </el-form-item>
       				</sc-form-layout-col>
       			</sc-form-layout-row>
			</sc-form-layout>            
        </el-form>              
        <!-- 表单底部 -->
        <div slot="footer" class="dialog-footer">
            <el-button type="primary" @click="createTemp" v-cloak>{{actions.save.text}}</el-button>
            <el-button @click="onCancel5" v-cloak>{{actions.cancel.text}}</el-button>
        </div>
    </el-dialog>
    <!-- 文件上传 弹出框  formData6-->
    <el-dialog title="指令附件管理" v-model="dialogFormVisible6" class="sc-normal" @close="onCancel6"  :close-on-click-modal="false">               
        <el-form :model="formData6" ref="formData6" >        
       		<sc-form-layout   label-width="normal" class="ypadding">
       			<sc-form-layout-row>
       				<sc-form-layout-col>
       					<el-form-item label="附件类型" prop="attaType">
       						<el-select v-model="formData6.attaType" clearable placeholder="请选择附件类型">
								<el-option v-for="item in attaTypeOptions" :label="item.ddName" :value="item.ddKey" :key="item.ddKey"></el-option>
							</el-select>
       					</el-form-item>
       				</sc-form-layout-col>
       			</sc-form-layout-row>
       			<sc-form-layout-row>
       				<sc-form-layout-col cols="2">
						<el-form-item v-if="fileElShow" label="已上传的附件" prop="attaName">
							 <el-input v-model="formData6.attaName" auto-complete="off"></el-input>
						</el-form-item>
						<el-form-item  v-else label="指令附件" prop="fileNameDeposit"   >
							<el-upload ref="attaManage-upload" 
								class="upload-demo" 
								:action="urls.upload" 
								:file-list="attaManageFileList" 
								:on-change="attaManageUploadChange"  
								:on-success="attaManageUploadSuccess" 
								:on-preview="attaManagePreview" 
								:on-remove="attaManageRemove"
								:before-upload="handleBeforeUpload"
								:data = "formData6"
								:auto-upload="false">
								<el-button size="small" type="primary" v-cloak>选择指令附件</el-button>
								<span style="margin-left:10px" slot="tip" class="el-upload__tip" v-cloak>
									<!-- 只能上传格式为<b style="color: red;">.pdf、.doc、.docx</b>的文件 -->
								</span>
								<el-button id="attaManage-uploadButton" v-show="false" style="margin-left: 10px;" size="small" type="success" @click.stop="submitUpload()" v-cloak>上传到服务器</el-button>
							</el-upload>							
						</el-form-item>
					</sc-form-layout-col>
       			</sc-form-layout-row>
			</sc-form-layout>            
        </el-form>              
        <!-- 表单底部 -->
        <div slot="footer" class="dialog-footer">
            <el-button type="primary" @click="onSubmit6('formData6')" v-cloak>{{actions.save.text}}</el-button>
            <el-button @click="onCancel6" v-cloak>{{actions.cancel.text}}</el-button>
        </div>
    </el-dialog>
    <!--发送时选择发送方式的 弹出框  formData7-->
    <el-dialog title="调整划款日期" v-model="dialogFormVisible7" class="sc-normal" @close="onCancel7"  :close-on-click-modal="false">               
        <el-form :model="formData7" ref="formData7" >        
       		<sc-form-layout label-width="normal" class="ypadding">
       			<sc-form-layout-row>
       				<sc-form-layout-col>
       					<el-form-item label="划款日期" prop="transferDate" :rules="[{ required: true, message: '划款日期不能为空'}]">
							<el-date-picker 
								@change="transferDateChange($event)"
								v-model="formData7.transferDate" 
								type="date"  
								placeholder="选择日期">
							</el-date-picker>
						</el-form-item>
       				</sc-form-layout-col>
       			</sc-form-layout-row>
			</sc-form-layout>            
        </el-form>              
        <!-- 表单底部 -->
        <div slot="footer" class="dialog-footer">
            <el-button type="primary" @click="updateTransferDate" v-cloak>{{actions.save.text}}</el-button>
            <el-button @click="onCancel7" v-cloak>{{actions.cancel.text}}</el-button>
        </div>
    </el-dialog>
    <!-- 错误信息提示 -->
    <el-dialog title="错误信息" class="sc-normal" v-model="dialogFormVisible8" @close="onCancel8">
    	<i class="el-icon-information"></i>
    	处理信息:共
    	<span v-cloak style="display:inline;font-weight:bold ">{{handleMsg | splitStr(0)}}</span>
    	条，成功
    	<span v-cloak style="display:inline;font-weight:bold ">{{handleMsg | splitStr(1)}}</span>
    	条，失败
    	<span v-cloak style="color:red;display:inline;font-weight:bold ">{{handleMsg | splitStr(2)}}</span>
    	条
		<ul class="sc-list">
            <li class="sc-item sc-card" v-for="data in msgList">
              <span class="close"></span>
              <el-row>
                <el-col :span="24">
                  <div>
                    <p style="text-align:left;" v-cloak>
                    	<span v-cloak style="display:inline;">
                    		{{data | getFirst}}
                    	</span>
                    	:
                    	<span style="color:red;display:inline;" v-cloak>
                    		{{data | getLast}}
                    	</span>
                  	</p>
                  </div>
                </el-col>
              </el-row>
            </li>
          </ul>
    </el-dialog>
    <el-dialog title="划款类型自定义顺序" class="sc-small" :visible.sync="dialogFormVisible9">
    	<div id="transferType_iframe"></div>
    </el-dialog>
</div>

<script>
var ctxPath = '/scxx-web';
Vue.filter('getFirst', function (val) {
	return val.split(':')[0];
});
Vue.filter('getLast', function (val) {
	return val.split(':')[1]; 
});
Vue.filter('splitStr', function (value,arg) {
	return value.split(',')[arg]; 
});
new Vue({
    el: '#app',
    data: function(){
        return {
        	/*---------  左右tab的样式  -------------*/
        	leftStyle:{
        		width: '100%',
			},
	        rightStyle: {
        		width: '0',
			    display:'none'
			},
			rightContentStyle:"",
			tooltip: true,
        	/*------------------------------------------  标准字段-----------------------------------------*/
        	queryConditions: {//查询条件
            	transferType : '',
            	transferDate : gobal.getNowDate(),
            	custodianBank : '',
            	orgId : '',
            	orgType : '',
            	prdId : '',
            	dateRange : '',
            	bizDateB : gobal.getNowDate(),
            	bizDateE : gobal.getNowDate(),
            	showHasDo : false,
            	showHasCancel : false,
            	showAll : false,
				excludeExported : false,
				excludeExportedCheck: false,
            },
			showExport: false,
            fuzzyQueryConditions: {//模糊查询条件

            },
            popQueryConditions : {
            	qSearch:'',
            	operator:'',
            	templateName:'',
            },
            acctQueryConditions : {
            	qSearch:'',
            	acctType:'',
            },
            treeDefaultProps: {
                labelKey: 'moduleName',
                nodeKey: 'id',
                childKey: 'treeModels'
            },
            msgList : [],
            handleMsg:'',
            orderPageQuery:{},////排序与分页的查询条件
            orderPageQuery2:{},////排序与分页的查询条件
            orderPageQuery3:{},////排序与分页的查询条件

			dialogExportVisible: false,
            formData : {
            	id : '',
            	templateName : '',
            	creater : '',
            	createTime : '',
            },
            formData2 : {//表单绑定数据
            	id:'',
            	prdId:'',
            	prdName : '',
            	transferType:'',
            	custodianBank : '',
            	bizDateB : '',
            	bizDateE : '',
            	dateRange : ["",""],
            	payeeAcctId : '',
            	payeeAcctCode : '',
            	draweeAcctCode : '',
            	payeeName : '',
            	openAcctBRBank : '',
            	transferAmount : '',
            	currency : '00118001', //币种默认人民币
            	payeeAmount : '',
            	payeeCurrency : '00118001', //币种默认人民币
            	payeeLargePayNo : '', //收款方支付系统号
            	draweeLargePayNo : '', //付款方支付系统号
            	transferUse : '',
            	transferRemark : '',
            	draweeAcctId : '', //付款账号
            	drawee : '',    //付款人
            	paymentAccntBrbank : '',
            	secCode : '', //证券代码
            	seatNo : '',
            	seatNos : '',
            	secName : '',
            	orgName : '',
            	orgCode:'',
            	orgId:'',
            	draweeAcctBankCode:'',
            	draweeUniteCode : '',
            	draweeAcctBankName:'',
            	draweeAcctId:'',
            	draweeAcctName:'',
            	draweeAcctNo:'',
            	draweeLargePayNo:'',
            	drawee:'',
            	
            	payeeAcctBankCode:'',
            	payeeUniteCode : '',
            	payeeAcctBankName:'',
            	payeeAcctId:'',
            	payeeAcctName:'',
            	payeeAcctNo:'',
            	payeeLargePayNo:'',
            	
            	transferDate:'',
	           	//千分位控制,字段。格式 " a,b,c"等
	           	commafyKeys: "transferAmount,payeeAmount",
            	
	           	bigTransferAmount:'',
	           	bigPayeeAmount:'',
	           	market:''
            },
			formData2bak:{},
            formData3:{
            	acctType : '',
            },
            formData4:{
            	curStatus : '',
            	remark : '',
            },
            formData5 : {
            	id : '',
            	templateName : '',
            	creater : '',
            	createTime : '',
            },
            formData6:{
            	id:'',
            	insId:'',
                attaName:'', //文件名
                attaType:'',//附件类型
                orderFormatAttaID:'',
                editUploadChange:false,
            },
            formData7:{
            	transferDate:'',
            },
            state:{//表单是否可编辑状态
                editKeys:""//修改标识
            },
            state2:{
				transferDate : false, //划款日期
				transferType : false, //划款类型
				prdId : false, //资产组合+
				transferAmount : false, //划款金额
				payeeAmount : false, //收款金额+
				transferUse : false, //划款用途
				transferRemark : false, //划款备注

				payeeAcctNo : false, //收款账号*1
				payeeAcctName : false, //收款人*1
				payeeAcctBankName : false, //收款开户行*1
				payeeLargePayNo : false, //支付系统号*1
				payeeUniteCode : false, //联行号*1
				payeeCurrency : false, //币种+*1

				draweeAcctNo : false, //付款账号*1
				draweeAcctName : false, //付款人*1
				draweeAcctBankName : false, //付款开户行*1
				draweeLargePayNo : false, //支付系统号*1
				draweeUniteCode : false, //联行号*1
				currency : false, //币种

				orgId : true, //机构名称
				dateRange : true, //日期范围
				secCode : true, //证券代码
				secName : true, //证券名称
				seatNo : true, //席位号

				btnSelectPayee : false, //收款账户选择
				btnSelectDrawee : false, //付款账户选择
				choseTem : false, //选择模板
				btnSave : false, //保存
				
				/*
            	orgId : true,
            	dateRange : true,
            	secCode : true,
            	secName : true,
            	seatNo : true,
            	choseTem : false,
				*/
            	//editKeys:"",//修改标识
            	payeeAmountAndCurrency : false
            },
			state2bak : {},
            firstLoad : true,
            orgFirstLoad : true,
            loading:false,
			urls:{//接口请求地址
              add:ctxPath+"/instructionInfoController/add",//增
              edit:ctxPath+"/instructionInfoController/edit",//改
			  copy:ctxPath+"/instructionInfoController/add",//复制
              table:ctxPath + "/instructionInfoController/dataGrid",//表格
              form:ctxPath+"/instructionInfoController/dataDetail",//表单
              
              orgCombobox : ctxPath + "/base/dropDownController/findOrgInfoCombobox",//机构名称下拉框
              dataDictCombobox : ctxPath + "/base/dropDownController/dataDictCombobox",
              dataDictComboboxHasOrder : ctxPath + "/base/dropDownController/dataDictComboboxHasOrder",
              productTree : ctxPath + "/productController/productTreeHkzl",
              templateDetail : ctxPath+"/instructionInfoController/templateDetail", //获取模板数据
              tempTable:ctxPath + "/orderTemplateMngController/dataGrid",//表格   
              createInsByTemp : ctxPath + "/instructionInfoController/createInsByTemp",//通过模板创建指令
              acctTable :  ctxPath + "/comandAcctController/acctInfoTable",
              number2CN : ctxPath + "/comandMngController/number2CN",//金额数值格式转换
              sureAndRollback : ctxPath+"/instructionInfoController/sureAndRollback",//确认与回退
              changeInsStatus : ctxPath+"/instructionInfoController/changeInsStatus",//修改指令状态
              findInsForm : ctxPath+"/instructionInfoController/findInsForm",
              createTemp : ctxPath+"/instructionInfoController/createTemp",
              seatCombobox : ctxPath+"/base/dropDownController/findSeatCombobox2",
              findOrgInfoCombobox1 : ctxPath+"/base/dropDownController/findOrgInfoCombobox1",
              //附件管理urls
              attaDel : ctxPath+"/instructionInfoController/attaDel",
              batchAttaDel : ctxPath+"/instructionInfoController/batchAttaDel",
              downloadOne : ctxPath+"/instructionInfoController/download",
              upload: ctxPath+"/instructionInfoController/upload",
              attaEdit : ctxPath+"/instructionInfoController/attaEdit",
              batchDownload :  ctxPath+"/instructionInfoController/batchDownloadAtta",
              PdfPreview : ctxPath+"/instructionInfoController/PdfPreview",//这是以流的形式
              pdfPreviewOnline : ctxPath+"/instructionInfoController/pdfPreviewOnline",//以url方式
              send : ctxPath+"/instructionInfoController/send",
              sendCancel : ctxPath+"/instructionInfoController/sendCancel",
              downloadByInsIds : ctxPath+"/instructionInfoController/downloadAttaByInsIds",
              attaForm : ctxPath+"/instructionInfoController/attaDataDetail",
              showAll : ctxPath+"/instructionInfoController/showAll",
              checkAttaIsExist : ctxPath+"/instructionInfoController/checkAttaIsExist",
              autoFindAcctInfo : ctxPath+"/instructionInfoController/autoFindAcctInfo",
              findFailIns : ctxPath+"/instructionInfoController/findFailIns",
              updateTransferDate : ctxPath+"/instructionInfoController/updateTransferDate",
              otcDataCheck : ctxPath + "/instructionInfoController/checkData",
              queryBankHandleInfo : ctxPath + "/instructionInfoController/batchFreshInsStatus",
              getStatusCountData : ctxPath + "/instructionInfoController/getStatusCountData",
              settlementQuery : ctxPath + "/instructionInfoController/settlementQuery", 
              sendAttaFile : ctxPath + "/instructionInfoController/sendAttaFile",  
              findParamByCode:ctxPath + "/paramRangeController/findParamByCode",
			  hasExported: ctxPath + "/instructionInfoController/hasExported",//判断是否含有已导出的指令
			  groupByTypeNotEmpty: ctxPath + "/instructionInfoController/groupByTypeNotEmpty",//查询导出指令按估值系统划款类型划分的文件名列表是否非空
			  exportInfo: ctxPath + "/instructionInfoController/exportInfo",//导出指令
			  findUseAndRemarkByType : ctxPath + "/instructionInfoController/findUseAndRemarkByType",//查询用途与备注
			  findDealInfoByInsId : ctxPath + "/instructionInfoController/findDealInfoByInsId",//查询指令的成交信息
			  findTaInfoByInsId : ctxPath + "/instructionInfoController/findTaInfoByInsId",//查询指令的ta数据
			  findFaxSendStatus : ctxPath + "/instructionInfoController/findFaxSendStatus",//查询传真 状态浮动数据
			  findFailAudit :  ctxPath + "/instructionInfoController/findFailAudit",//查询自动生成指令时 自动流程错误信息
			},
            formats: {//需格式化数据
            	bizDateB: {format: "yyyy-MM-dd"},
            	bizDateE: {format: "yyyy-MM-dd"},
            	transferDate : {format: "yyyy-MM-dd"},
            	transferAmount: {format: "￥10,000.00", isIntFixed: true},//,isMillionYuan: false, multiplier: 1, isZeroFixed: false,},
            	payeeAmount: {format: "￥10,000.00", isIntFixed: true},
            	fdate: {format: "yyyy-MM-dd"},
            	amount: {format: "￥10,000.00", isIntFixed: true},
            	dealAmount: {format: "￥10,000.00", isIntFixed: true},
            },
            activeNames: ['1','2','3','4'],
            queryShow: true,//是否展开高级查询
            buttonShow : false,
            fqInputStyle:"200px",//模糊查询输入框样式
            selections: {arrRows: [], arrIds: [], strIds: '',},//批量数据
            attaSelections: {arrRows: [], arrIds: [], strIds: '',},//批量数据
            currentState:"",//当前模态框类型
            dialogFormVisible:false,//模态框是否显示
            dialogFormVisible2:false,
            dialogFormVisible4:false,
            dialogFormVisible5:false,
            actions:{},//全局对象参数
            queryInit:{},//查询默认数据
            queryInit2:{},//查询默认数据
            queryInit3:{},
            formDataInit:{},//表单默认数据
            formData6Init:{},
            columnKey:'id',//行数据Id名称
            currentPage: 1,//当前页
            totalPage:0,//条数
            pageSize:0,//每页显示条数
            pageSizes:[],//页数
            tableData: [],//表格数据
            tableHeight:500,//表格高度
            dialogTitle:"",//模态框标题
            oprUrl:"",////当前接口地址
            fqInputStyle : '200px',//右上角查询输入框的宽度
            transferAmountLabelText : '划款金额',
            currencyLabelText : '币种',
            /*------------------------------------------  非标准字段（自定义字段名）------------------------------------------*/
           //下拉列表数据
           transferTypeOptions : [],
           bankOptions : [],
           orgNameOptions : [],
           queryOrgNameOptions : [],
           orgTypeOptions : [],
           payeementInfo : [],
           currencyOptions : [],
           paymentInfo : [],
           acctTypeOptions : [],
		   showRangeOptions : [],
		   showOrgOptions : [],
		   showSecOptions : [],
           //树参数
           
           singlProductData:[],
           porductData: [],
           defTreeArrChecked: [],
           productProps:{ 
           	children:'treeModels',
           	label:'moduleName',
           	nodeKey: 'id',
           },   
           
	       
	       filterText2 : '',
           mutiTreeText2: '',
           mutiTreeValue2: '',
	       
	       //模板弹出层
	       tempData : [],
	       checkTempId : '',
	       checkInsId:'',
	       //指令编辑弹出层
	       pop3Status : '',
	       dialogFormVisible3 : false,
	       checkAcctId:'',
           checkAcctRow:{},
           acctData : [],//弹出层  账号表格数据
           
           //第三层 账户信息table的分页
           currentPage3: 1,//当前页
           totalPage3:0,//条数
           pageSize3:0,//每页显示条数
           pageSizes3:[],//页数
           
         //第二层 模板table的分页
           currentPage2: 1,//当前页
           totalPage2:0,//条数
           pageSize2:0,//每页显示条数
           pageSizes2:[],//页数
           
           insInfo:{},
           attaInfo:[],
           statusInfo:[],
           checkRow : {},
           defaultChecked : [],
           datas: [],
           selValue: '',
           selText: '',
           allChecked:false,
           allText:"全选",
           /** 附件管理区域 */
           tooltipEnterable:false,
           dialogFormVisible6:false,
           dialogFormVisible7:false,
           dialogFormVisible8:false,
           dialogFormVisible9:false,
           attaTypeOptions:[],
           fileElShow:false,
           attaManageFileList:[],
           currentState6:'',
           currentState7:'',
           fileChange : false,
           payCnOptions:[],
		   sureAuthList:[],
		   backAuthList:[],
		   stateInfo1:"",
		   statusCountData: {
			   HANDLED_COUNT:"-",
			   CHECKED_COUNT:"-",
			   APPROVED_COUNT:"-",
			   SENDED_COUNT:"-", 
		   },

		   failData: [],
		   failAuditData: [],
		   auditStateInfo : "",
		   //全屏加载
		   fullscreenLoading: false,
		   commonQuery : false,//false普通查询;true核对勾选查询
		   
		   // 动态列
       	   configColumns: [],
           config: [],
           dialogTableVisible:false,
           originData:[],
           originData_copy: [],

           miniStyle:'width:100%;',
           //核对并勾选按钮是否启用
           verifyDataType:false,
           
           //是否选择了模版
           isTemplate : false,
           
           formData4title : "操作",
           formData4lable : "原因",
           hasReviewer:false,
           //成交信息提示的分页
           dealInfo :[],
           currentPage4 : 1,
           total4 : 0,
           
           taDataInfo : [],
           currentPage5 : 1,
           total5 : 0,
           
           faxStatusInfo : [],
           
           seachType : '',
           
           popDataConditions: {//查询条件
			insId : '',
           },
           transferTypeList:{
        	   dvpType : [
							'00088019',//调入DVP账户(中债)
							'00088020',//调入DVP账户(上清所)
							'00088021',//调出DVP账户(中债)
							'00088022',//调出DVP账户(上清所)
        	            ],
        	   taType : [
        	             	'00088010',//TA赎回款
        	             	'00088018',//TA轧差款
        	             	'00088055',//TA转出款
        	             	'00088113',//上海中登TA申购款
        	             	'00088114',//上海中登TA赎回款
        	             	'00088115',//上海中登TA轧差款
        	             	'00088116',//上海中登TA转出款
        	             	'00088117',//上海中登TA转入款
        	             	'00088120',//深圳中登TA申购款
        	             	'00088121',//深圳中登TA赎回款
        	             	'00088122',//深圳中登TA轧差款
        	             	'00088123',//深圳中登TA转出款
        	             	'00088124',//深圳中登TA转入款
        	             ],
	           allType : [
							'00088019',//调入DVP账户(中债)
							'00088020',//调入DVP账户(上清所)
							'00088021',//调出DVP账户(中债)
							'00088022',//调出DVP账户(上清所)
	    	             	'00088010',//TA赎回款
	    	             	'00088018',//TA轧差款
	    	             	'00088055',//TA转出款
	    	             	'00088113',//上海中登TA申购款
	    	             	'00088114',//上海中登TA赎回款
	    	             	'00088115',//上海中登TA轧差款
	    	             	'00088116',//上海中登TA转出款
	    	             	'00088117',//上海中登TA转入款
	    	             	'00088120',//深圳中登TA申购款
	    	             	'00088121',//深圳中登TA赎回款
	    	             	'00088122',//深圳中登TA轧差款
	    	             	'00088123',//深圳中登TA转出款
	    	             	'00088124',//深圳中登TA转入款
	    	             ],           
           },
           //默认展开的节点
           openNodes:['00'],
           isClear: false,
           isWatchPrdId: false,
           isWatchTransfer: false
        }        
    },
    filters: {
    	formatterValue: function (value, formatter) { //{{}}格式下金额格式化
           return "￥"+gobal.dataFormat(value, formatter);
        },
    	tFormatterValue: function (value, formatter) { //{{}}格式下金额格式化
           return gobal.dataFormat(value, formatter);
        },
        dataFormatterValue :  function (value, formatter) { //{{}}格式下时间格式化
        	return gobal.dataFormat(value, formatter);
        }
    },
    watch:{
    	/* tableHeight:function(val,oldval){
    		var splitterHeight = val + 52+'px';
    		var frameHeight = val -17 +'px';
    		this.miniStyle ='width:100%;height:'+splitterHeight+'';
    	} */
    	dialogFormVisible2: function(val) {
    		this.isTemplate = false;
    	},
    	'formData2.seatNo' : function(val,oldval){
    		if(val == "" && oldval != val){
    			for(var i = 0;i<this.datas.length;i++){
    				var item = this.datas[i];
    				item.checked = false;
    			}
    		}
    	},
    	'formData2.prdId': function(val, oldVal) {
    		
    		if(!this.isWatchPrdId){
    			if (this.currentState != "add") {
        			if (oldVal || this.isClear) {
            			this.findAcctByPrdIdAndTransType();
            		}
        		} else {
        			this.findAcctByPrdIdAndTransType();
        		}
    		}else{
    			this.isWatchPrdId = false;	
    		}
    	},
    	'formData2.transferType': function(val, oldVal) {
    		
    		if(!this.isWatchTransfer){
    			if (this.currentState != "add") {
        			if (oldVal || this.isClear) {
            			this.findAcctByPrdIdAndTransType();
            		}
        		}else{
        			this.findAcctByPrdIdAndTransType();
        		}
    		}else{
    			this.isWatchTransfer = false;	
    		}
    	},
    	
    },
    created: function() {
    	$("body").addClass("sc-skin1");
        /*------------------------------------------  初始化设置 ------------------------------------------*/
	    var _this=this;

        //查询指令导出是否启用
		request.post(_this, ctxPath+"/paramRangeController/findParamByCode", {code : "00046",}, function(data) {
			if(data.parValue == '1'){
				_this.showExport=true;
			}
		});

        //核对并勾选按钮是否启用
	    request.post(_this,ctxPath+"/tri/dropDownController/verifyDataType",{},function(data){
			if(data == "1"){
				_this.verifyDataType=true;
			}else{
				_this.verifyDataType=false;
			}
			
    	}); 
	    //加载指令类型下拉框
		request.post(this, _this.urls.dataDictComboboxHasOrder, {
				itemKey : "00088",
				modelName : "transferType",
			}, function(data) {
			_this.transferTypeOptions=data;
		});
		//加载银行信息下拉框
    	request.post(this,ctxPath + "/tri/dropDownController/getDPayeeBankList","",function(data){
    		_this.bankOptions=data;
    	});
    	// 加载机构类型
        request.post(this, ctxPath + "/base/dropDownController/dataDictCombobox", {itemKey:"00126",extendVal:"0"},function(data) {
            _this.orgTypeOptions = data;
	    });
    	//加载机构名称数据
		request.post(this, _this.urls.orgCombobox, {}, function(data) {
			_this.orgNameOptions = data;
		});
    	//加载资产组合权限列表
    	request.post(this,ctxPath + "/productController/findCustomProductGroup","",function(data){
            _this.defTreeArrChecked=data;
            request.post(_this, _this.urls.productTree, "", function(data){
            	var all = {
                  id: '00',
                  moduleName: '全部',
                  treeModels: [],

                };

                for (var i = 0; i < data.length; i++) {
                  all.treeModels.push(data[i]);
                }
                _this.porductData.push(all);
            	_this.singlProductData = data;
            }); 
        }); 
		
		//加载账户类型
    	request.post(this, _this.urls.dataDictCombobox, {
				itemKey : "00084",
		}, function(data) {
				_this.acctTypeOptions = data;
		});
    	//加载币种
		request.post(this, _this.urls.dataDictCombobox, {
				itemKey : "00118",
		}, function(data) {
				_this.currencyOptions = data;
		});
    	//加载需要显示事件范围的划款类型options
    	request.post(this, _this.urls.dataDictCombobox, {
				itemKey : "00136",
		}, function(data) {
				_this.showRangeOptions = data;
		});
    	//加载需要显示机构的划款类型options
    	request.post(this, _this.urls.dataDictCombobox, {
				itemKey : "00137",
		}, function(data) {
				_this.showOrgOptions = data;
		});
    	//加载需要显示证券的划款类型options
    	request.post(this, _this.urls.dataDictCombobox, {
				itemKey : "00138",
		}, function(data) {
				_this.showSecOptions = data;
		});
    	//加载指令附件类型字典
    	request.post(this, _this.urls.dataDictCombobox, {
				itemKey : "00139",
				extendVal:"1",
		}, function(data) {
				_this.attaTypeOptions = data;
		});
    	//加载支付通道下拉列表
    	request.post(this,_this.urls.dataDictCombobox,{itemKey:"00087"},function(data){
    		_this.payCnOptions=data;    		
    	});
    	
    	//加载是否需要复核人栏位
   	 	request.post(this, _this.urls.findParamByCode, {code:"00040"}, function(data) {
			if(data.parValue && "1" == data.parValue){
				_this.hasReviewer = true;
			}
		});
    	//
    	_this.queryConditions.dateRange = [_this.queryConditions.bizDateB,_this.queryConditions.bizDateE];
    	
    	
    	this.fqInputStyle=gobal.fqInputStyle;
      	//this.pageSize=gobal.pagination.pageSize;
      	this.pageSize=100;
      	this.pageSizes=gobal.pagination.pageSizes;      
      	//表格数据加载
      	this.queryConditions[gobal.pagination.page]=1;
      	this.queryConditions[gobal.pagination.rows]=this.pageSize;
      	this.queryInit = utils.myAssign({}, this.queryInit, this.queryConditions);
      	this.orderPageQuery = utils.myAssign({}, this.orderPageQuery, this.queryConditions);
      	this.formDataInit = utils.myAssign({}, this.formDataInit, this.formData);
      	
      	this.pageSize3=gobal.pagination.pageSize;
    	this.pageSizes3=gobal.pagination.pageSizes;    	
        this.acctQueryConditions[gobal.pagination.page]=1;
        this.acctQueryConditions[gobal.pagination.rows]=this.pageSize3;
        this.queryInit3 = utils.myAssign({}, this.queryInit3, this.acctQueryConditions);
        this.orderPageQuery3 = utils.myAssign({}, this.orderPageQuery3, this.acctQueryConditions);
        
        this.pageSize2=gobal.pagination.pageSize;
    	this.pageSizes2=gobal.pagination.pageSizes;    	
        this.popQueryConditions[gobal.pagination.page]=1;
        this.popQueryConditions[gobal.pagination.rows]=this.pageSize2;
        this.queryInit2 = utils.myAssign({}, this.queryInit2, this.popQueryConditions);
        this.orderPageQuery2 = utils.myAssign({}, this.orderPageQuery2, this.popQueryConditions);
      	
        this.columnAuto();
      	this.getTableData();
      	this.fqInputStyle = gobal.fqInputStyle;
        this.tableColumnLayOut = globalLayOut.getTableColumn();
        
      	this.actions=gobal.getActions(this.urls);
		
		this.state2bak = utils.objClone(this.state2, true);//备份编辑弹框的初始状态 
		this.formData2bak = utils.objClone(this.formData2, true);//备份指令弹框的初始值
    },
    mounted:function(){
    	gobal.getTableHeight(this);//获取表格高度
    },
    updated:function(){
    	gobal.getTableHeight(this);//更新表格高度
    	this.$nextTick(function(){
    		this.setSplitterHeight();
    	});;
	  	/*this.rightContentStyle = ';height:'+this.tableHeight+30+'px;overflow:auto; position: relative;';*/
    },
    methods:{
    	renderHeader: function(h , obj) {
    		//return '<a>' + obj.column.label + '</a>';
    		return h('a', {'class': 'renderHeaderClass'}, obj.column.label);
    	},
    	setSplitterHeight:function(){
    		var splitterHeight;
			var pageHeight = document.getElementsByClassName('el-pagination')[0].offsetHeight;
			splitterHeight = pageHeight > 24?  this.tableHeight + 50 +'px' : this.tableHeight + 28 +'px';
    		this.miniStyle ='width:100%;height:'+splitterHeight+'';
    	},
    	//查看回收站
    	recycle:function(){
    		var _this = this;
			request.post(_this, ctxPath + "//base/dropDownController/hasPermissionByMenuId", {
					"menuId" : "4028c8c35f6b62b2015f6b6a72510003"
				}, function(data) {
					if (data.success) {
						var vdata = {
								fieldCode : '4028c8c35f6b62b2015f6b6a72510003',
								fieldName : '指令回收站',
								fieldUrl : '/instructionInfoController/instructRecycle',
								mode : 4,
								eventName : 'tiggerMenuClick'
							};
						var dataToParent = JSON.stringify(vdata);
						window.top.postMessage(dataToParent, '*');
					} else {
						gobal.openComfirm(_this, gobal.getComfirmInfo(dictFormState.operateAuth));
					}
				});
    	},
    	
    	//========动态列方法========
    	openconfigtable: function() {
    		var _this = this;
	        var url = ctxPath + "/tsLayoutInfoController/dataGrid";
	        request.post(_this,url,{
            	tableCode:'bankFeeQuery'
            },function(data){
    	        if (data && data.rows.length == 0) { 
    	        	_this.$refs.tableConfig.openDialog();
	      		   _this.config = _this.$refs.multipleTable.store.states.originColumns;
    	        } else {
    	        	_this.$refs.tableConfig.openDialog();
    	        	_this.originData = _this.originData_copy;
    	           _this.config = data.rows;
    	        }
            });
        },
        applyconfig: function(data) {
        	var _this = this;
        	var url = ctxPath + "/tsLayoutInfoController/add";
            var config = ["originId","property","label","fixed","visibleBool","selection"];
            var param = [];
            for(var i = 0;i < data.length; i++){
            	var dual = {};
           		dual['tableCode'] = 'bankFeeQuery';
           		dual['viewOrder'] = i;
            	for(var j = 0; j < config.length; j++){
            		if(config[j] == "visibleBool"){
            			dual['visible'] =  data[i][config[j]]?1:0;
            		}else{
            			dual[config[j]] = data[i][config[j]];
            		}
            	}
            	param.push(dual);
            }
            request.post(_this,url,{
            	tsLayoutInfo:JSON.stringify(param)
            },function(dataCao){
            	if(dataCao.success){
            		_this.$refs.tableConfig.closeDialog();
	                _this.configColumns = data;
	                _this.$nextTick(function () {
	                	_this.$refs.multipleTable.doLayout();
	                	_this.$refs.multipleTable.doLayout();
	                });
            	}
            	gobal.messageShow(_this,dataCao);
        	}); 
        },
        columnAuto:function(data){
        	var _this = this;
	        var url = ctxPath + "/tsLayoutInfoController/dataGrid";
	        request.post(_this,url,{
            	tableCode:'bankFeeQuery'
            },function(data){
            	if (data && data.rows.length > 0) {
        			 _this.originData_copy = _this.$refs.multipleTable.store.states.originColumns;
     	        	 _this.configColumns = data.rows;
     	             _this.$nextTick(function () {
     	             	_this.$refs.multipleTable.doLayout();
     	             });
            	}
            });
        },
    	onSelectTreeChange: function(values, fromType) {
        	//console.log(values);
        	var _this=this;
        	var selectId = '';
        	// id字符串
        	if(utils.isArray(values)){
        		selectId = values.map( function(item){
	              	return item[_this.productProps.nodeKey];
	            }).toString();
        	}else if(utils.isObject(values)){
        		selectId = values[_this.productProps.nodeKey];
        	}else {
        		console.log("values 类型异常");
        	};
            
            if(utils.isEmpty(fromType) || fromType == 'queryConditions'){
            	fromType =  'queryConditions';
            	this[fromType].prdId = selectId;
	            //if(!this.pageInit){this.getTableData(); this.pageInit = true};
            }else if(fromType == 'formData2'){
            	this[fromType].prdId = selectId;
            }
        	//如果已经选了划款类型,加载账号信息
        	
        	/* if(_this.formData2.transferType){
        		if(_this.firstLoad){
        			_this.firstLoad = false;
        		}else{
        			_this.findAcctByPrdIdAndTransType();
        		}
        	} */
        },
    	    	
	    getScreenWidth: function(){
	    	if(window.screen.width > 1366){
				return false;
			}else{
	    		return false;
			}
		},
    	transferAmountFormat : function(type) {//金额格式化
			var _this = this;
    		if(type == 0){	// 付款金额 | 划款金额
				_this.formData2.bigTransferAmount = utils.convertCurrency(_this.formData2.transferAmount.replace(/,/g,""));
    		}else if(type == 1){	// 收款金额
				_this.formData2.bigPayeeAmount = utils.convertCurrency(_this.formData2.payeeAmount.replace(/,/g,""));
    		}
		},
    	formatter: function(row, column){//格式化数据方法
    		return gobal.formatter(row, column.property, this.formats);
    	},
    	pauseFlagStatus : function(row, column){ //显示table时 转换状态的显示
    		if(row.pauseFlag == '0'){
    			return '正常';
    		}
    		if(row.pauseFlag == '1'){
    			return '暂停';
    		}
    	},
        onAdvanceQuery: function() {//展开、收缩高级查询
            this.queryShow = !this.queryShow;
        },
        onMoreButton: function() {//展开、收缩高级查询
            this.buttonShow = !this.buttonShow;
        },

        /*------------------------------------------ 批量删除-----------------------------------------*/

        onTopBtn: function(fromType, selections,formKeyName) { //批量操作
            var _this = this;
            if(utils.isNotEmpty(selections.strIds)){
                this.openComfirmAndReq(_this, dictFormState[fromType], null, this.urls[fromType], {ids: selections.strIds},formKeyName);  
            }
        },
        onSelectionChange: function(val) { 
            var _this = this;
            var strIds = '';
            var selectArrObjIds = [];
            var idKey = this.columnKey || 'id';
            utils.myForEach(val, function(index, row) {
                var selectArrObj = {};
                strIds += row[idKey] + (index == val.length-1 ? '' : ',');
                selectArrObj[idKey] = row[idKey];
                selectArrObjIds.push(selectArrObj);
            });
            this.selections.arrRows = val;
            this.selections.strIds = strIds;
            this.selections.arrIds = selectArrObjIds;
        },
        onAttaSelectionChange : function(val){
        	var _this = this;
            var strIds = '';
            var selectArrObjIds = [];
            var idKey = this.columnKey || 'id';
            utils.myForEach(val, function(index, row) {
                var selectArrObj = {};
                strIds += row[idKey] + (index == val.length-1 ? '' : ',');
                selectArrObj[idKey] = row[idKey];
                selectArrObjIds.push(selectArrObj);
            });
            this.attaSelections.arrRows = val;
            this.attaSelections.strIds = strIds;
            this.attaSelections.arrIds = selectArrObjIds;
        },
        openComfirmAndReq: function(_this, dictFormStateType, comfirmInfoMsg, url, param, callback){
          curThis = this;
          var objComfirmInfo = gobal.getComfirmInfo(dictFormStateType, comfirmInfoMsg);
          gobal.openComfirm(_this, objComfirmInfo, function() {
            curThis.toReqest(_this, url, param, callback);
            }); 
        },
       
        toReqest: function(_this, url, param, callback){
            request.post(_this, url, param, function(data) {
              try{ 
            	if(utils.isFunction(callback)){
            		callback && callback();
            	}
            	}catch(e){
            	};
                gobal.messageShow(_this, data);
                _this.getTableData(); //表格数据刷新    
            });
        },
    
    	 /*------------------------------------------ 查询重置-----------------------------------------*/
    	 
    	onQuery:function(){//查 询      
        	this.orderPageQuery = utils.myAssign({}, this.orderPageQuery, this.queryConditions);
        	this.commonQuery =false;
            this.getTableData();     
        },
        fuzzyQueryClick: function(ev) { //模糊查询
            this.getTableData(this.fuzzyQueryConditions);
        },
        onReset:function(){//重置
        	 this.$refs.tree.setCheckedKeys([]); 
        	// this.$refs['selectTree-' + 'queryConditions'].empty();
        	this.mutiTreeText = "";
        	this.queryConditions.prdId = '';
        	this.queryConditions = utils.myAssign({}, this.queryConditions, this.queryInit);
        	this.orderPageQuery = utils.myAssign({}, this.orderPageQuery, this.queryInit);
        	this.defaultChecked = [];
        	this.currentPage=1;
            //this.pageSize=gobal.pagination.pageSize;
            this.pageSize=100;
			this.pageSizes=gobal.pagination.pageSizes;
        	this.getTableData();
        	this.back();
        },
        
    	 /*------------------------------------------ 表格方法 ------------------------------------------*/
        onHandleSizeChange:function(val) {//每页条数改变
          	var _this=this;
            this.pageSize=val;
            this.orderPageQuery[gobal.pagination.rows]=this.pageSize;
            this.queryConditions[gobal.pagination.rows]=this.pageSize;
            this.fuzzyQueryConditions[gobal.pagination.rows]=this.pageSize;
            this.getTableData(this.orderPageQuery);
        },
        onHandleCurrentChange:function(val) {//当前页改变
            var _this=this;
            this.currentPage = val;
			this.currentRow = val;
            this.orderPageQuery[gobal.pagination.page]=val;
            this.queryConditions[gobal.pagination.page]=val;
            this.fuzzyQueryConditions[gobal.pagination.page]=val;
            this.getTableData(this.orderPageQuery);
        },
        onSort:function(val){//排序数据
           this.orderPageQuery[gobal.pagination.order]=(val.order=="ascending"?gobal.pagination.asc:gobal.pagination.desc);
           this.orderPageQuery[gobal.pagination.sort]=val.prop;
           this.queryConditions[gobal.pagination.sort]=val.prop;
           this.fuzzyQueryConditions[gobal.pagination.sort]=val.prop;
           this.getTableData(this.orderPageQuery);
        },
        getTableData:function(vPara){//获取表格数据
        	var _this=this;
       		var reqData=vPara;
			_this.queryConditions.excludeExported = _this.queryConditions.excludeExportedCheck;
               if(!reqData)reqData=this.queryConditions;
               reqData.commonQuery = _this.commonQuery;
               request.post(this,this.urls.table,reqData,function(data){
            	   	_this.back();
             	    _this.getFailData();
             	    _this.getAuditFailData();
             	    _this.getStatusCountData(reqData);
             	 var start = new Date().getTime();
                 _this.tableData=data.rows;
                 _this.totalPage=data.total;
                 _this.$nextTick(function(){
                 	 var end = new Date().getTime();
                 	 console.log(end-start);
					 //核对并勾选
                 	 if(_this.commonQuery && utils.isNotEmpty(_this.tableData) && _this.tableData.length > 0){
  	        		   for(var i = 0;i<_this.tableData.length;i++){
  							  if(_this.tableData[i].fcheakup == 1){								  
  								  _this.tableData[i].checked = true;
  								  _this.$refs.multipleTable.toggleRowSelection(_this.tableData[i],true);  
  							  }
  						  }
  	        	   	}	
                 })
                 if(data.field != ""){
               		_this.sureAuthList = data.field.split(",");
                 }
                 if(data.treefield != ""){
                 	_this.backAuthList = data.treefield.split(",");
                 }
				if(_this.$refs.multipleTable){
					_this.$refs.multipleTable.resetScroll();
				}
			});
        },
        
        /*------------------------------------------ 增删改查 ------------------------------------------*/
        
        onAdd:function(){//增
          var _this = this;
          this.commonQuery =false;
          //_this.$refs.popTree.setCheckedKeys([]);   
          this.isTemplate = false;
          this.setFormState(dictFormState.add);
          //this.formData2 = utils.myAssign({}, this.formData2, this.formDataInit2);
          this.dialogTitle = '指令管理-新增';
          this.mutiTreeText2 = "";
		  _this.formData2 = utils.objClone(_this.formData2bak, true);//清空输入值
		  _this.state2 = utils.objClone(_this.state2bak, true);//表单输入还原到编辑的默认状态
      	  //this.formData2.prdId = "";
      	  /* _this.formData2.bizDateB = gobal.getNowDate();
      	  _this.formData2.bizDateE = gobal.getNowDate();
      	  _this.formData2.dateRange = [_this.formData2.bizDateB,_this.formData2.bizDateE];
      	*/
          //_this.formData2.dateRange = ["",""];
          _this.formData2.transferDate = gobal.getNowDate(); 
		  this.dialogFormVisible2 = true;
        },
        cancelSend : function(){  //发送撤销指令
        	_this = this;
        	if(!_this.noCheckIns()){
				return;
			}
			var para={ids:_this.selections.strIds};
			request.post(_this,_this.urls.sendCancel,para,function(data){
           		if(!data.success){
    				_this.msgList = data.obj;
    				_this.dialogFormVisible8 = true;
    				_this.handleMsg = data.msg;
    			}else{
    				_this.msgList = [];
    				_this.dialogFormVisible8 = false;
    				_this.handleMsg = "";
    				data.msg = "共"+data.msg.split(",")[0]+"条,全部处理成功!";
    				gobal.messageShow(_this,data);
    			}
           		_this.getTableData(); 
           	});	 
        },
        send : function(){   //发送划款指令
        	var _this = this;
        	this.commonQuery =false;
        	if(!_this.noCheckIns()){
				return;
			}
        	this.fullscreenLoading = true;
			var para={ids:_this.selections.strIds};
			request.post(_this,_this.urls.send,para,function(data){	
				_this.fullscreenLoading = false;
				if(!data.success){
					_this.msgList = data.obj;
					_this.dialogFormVisible8 = true;
					_this.handleMsg = data.msg;
				}else{
					_this.msgList = [];
					_this.dialogFormVisible8 = false;
					_this.handleMsg = "";
					data.msg = "共"+data.msg.split(",")[0]+"条,全部处理成功!";
					gobal.messageShow(_this,data);
				}
           		_this.getTableData(); 
           	});	 
        },
        onDeleteRow:function(index, rows){ //删         	
        	var _this=this;
        	var columnKey = this.columnKey || "id";
        	var para={id:rows[index][columnKey]};
        	var obj=gobal.getComfirmInfo(dictFormState.del);
        	this.oprUrl=this.urls.del;	
        	gobal.openComfirm(this,obj,function(){
            	request.post(_this,_this.oprUrl,para,function(data){
            		gobal.messageShow(_this,data);
            		_this.getTableData(); 
            	});	 		
        	});	
        },
        onEditRow:function(index, rows){//改
        	var _this = this;
        	this.commonQuery =false;
        	var chickIds = _this.selections.arrIds;
        	if(chickIds.length > 1){
        		var obj={
		        		title:"提示",
		        		text:"只能选择一条指令进行编辑!",
		        		oKText:"确 定",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
        	}
        	if(chickIds.length == 0){
        		var obj={
		        		title:"提示",
		        		text:"请先选择一条指令!",
		        		oKText:"确 定",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
        	}
        	if("00133001" != _this.selections.arrRows[0].auditProcessStatusCode ){ //只有待处理 才可以编辑
        		var obj={
		        		title:"提示",
		        		text:"只有待处理的指令可以编辑!",
		        		oKText:"确 定",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
        	}
        	//this.state2.choseTem = false;
        	this.firstLoad = true;
        	this.orgFirstload = true;
        	this.dialogTitle = '指令管理-编辑';
			_this.formData2 = utils.objClone(this.formData2bak, true);//清空输入值
			_this.state2 = utils.objClone(_this.state2bak, true);//表单输入还原到编辑的默认状态
        	var param = {id:chickIds[0].id};
        	this.getFormData(param);
        	this.setFormState(dictFormState.edit);
        	this.dialogFormVisible2 = true;
        },
        onCheck:function(){
          var _this = this;	
          _this.commonQuery = true;
          _this.fullscreenLoading = true;
          _this.queryConditions.commonQuery = true;
		  request.post(_this,_this.urls.otcDataCheck,_this.queryConditions,function(data){
	           _this.tableData=data.rows;
	           _this.totalPage=data.total;
	           _this.$nextTick(function(){
	        	   if(utils.isNotEmpty(_this.tableData) && _this.tableData.length > 0){
	        		   for(var i = 0;i<_this.tableData.length;i++){
							  if(_this.tableData[i].fcheakup == 1){								  
								  _this.tableData[i].checked = true;
								  _this.$refs.multipleTable.toggleRowSelection(_this.tableData[i],true);  
							  }
						  }
	        	   }	        	   
	        	   _this.fullscreenLoading = false;
	            });  
          });  
        },
        
        /*------------------------------------------  表单方法 ------------------------------------------*/
        
        onSubmit:function(formName){//触发确定
            var _this=this;
            _this.fullscreenLoading = true;
            this.$refs[formName].validate(function(valid){
                if (valid) {                	
                	_this.formSubmit();                   
                } else {
                	_this.fullscreenLoading = false;
                    return false;
                }
            });
        },
        onCancel:function(){//触发取消
        	this.dialogFormVisible = false;
            this.$refs['formData'].resetFields();
            this.popQueryConditions.templateName = "";
        },
        formSubmit:function(){//提交数据
            var _this=this;
            var strUrl="";
            strUrl=this.urls[this.currentState];
            if(_this.formData2.payeeAmount != null){
            	_this.formData2.payeeAmount = _this.formData2.payeeAmount.replace(/,/g,"");
            }
            if(utils.isNotEmpty(_this.formData2.transferDate))_this.formData2.transferDate = new Date(_this.formData2.transferDate).Format("yyyy-MM-dd");
            request.post(this,strUrl,_this.formData2,function(data){
        		if(data.success){
        			_this.dialogFormVisible2 = false;
            		_this.dialogFormVisible = false;
            		_this.getTableData();
        		}	
        		_this.fullscreenLoading = false;
        		gobal.messageShow(_this,data);
        	});        
        },
        formPopUp:function(state,index,rows){//弹出模态框
        	this.setFormState(state);
        	var columnKey = this.columnKey || "id";
        	var para={id:rows[index][columnKey]};
        	this.getFormData(para);
        	this.dialogFormVisible2 = true;
        	this.actions.save.visible=(state==dictFormState.edit);
        },
        getFormData:function(objKey){//获取表单数据
        	var _this=this; 	
        	request.post(this,this.urls.form,objKey,function(data){
        		utils.formDataCopy(_this.formData2, data);	
        		_this.$refs['selectTree-formData2'].setCheckedKeys((data.prdId || "").split(","));
        		if(_this.formData2.prdName){
        			_this.mutiTreeText2 = _this.formData2.prdName;
        		}else{
        			_this.mutiTreeText2 = "";
        		}
        		if(_this.formData2.bizDateB && _this.formData2.bizDateE){
        			var dateB = new Date(_this.formData2.bizDateB);
            		var dateE = new Date(_this.formData2.bizDateE);
            		var newDateB = dateB.getFullYear() + "-" + 
            						((dateB.getMonth()+1)<10 ? "0" + (dateB.getMonth()+1) : (dateB.getMonth()+1)) + "-" + 
            						((dateB.getDate() < 10) ? "0" + dateB.getDate() : dateB.getDate());
            						
             	    var newDateE = dateE.getFullYear() + "-" + 
             	    				((dateE.getMonth()+1)<10 ? "0" + (dateE.getMonth()+1) : (dateE.getMonth()+1)) + "-" + 
             	    				(dateE.getDate() < 10 ? "0" + dateE.getDate() : dateE.getDate());
            		_this.formData2.dateRange = [newDateB+"",newDateE+""];
        		}
        		//显示金额大写
        		_this.formData2.bigTransferAmount= utils.convertCurrency(_this.formData2.transferAmount.replace(/,/g,""));
        		_this.formData2.bigPayeeAmount= utils.convertCurrency(_this.formData2.payeeAmount.replace(/,/g,""));
        		_this.formData2 = Object.assign({},_this.formData2);
        		if(_this.currentState == "copy"){
        			_this.formData2.transferDate = gobal.getNowDate();
        		}
        	});     	
        },
        setFormState:function(mode){//设置表单字段编辑状态
        	var vState=false;
        	var vKeyStr="";
        	this.currentState=mode;
        	if(mode==dictFormState.read)vState=true;
        	if(mode==dictFormState.edit)vKeyStr=this.state.editKeys;
        	for(var key in this.state)
        	{
        		if(key!="editKeys")
        		{
	        		this.state[key]=vState;
	          		if(vKeyStr!=""){
	          			if(vKeyStr.indexOf(key)>=0)this.state[key]=true;
	          		}
        		}
        	}
        },
        //查询条件树 ---------开始
        filterMethod: function(val){
    		this.filterText = val;
    	},
    	filterNode: function(value, data){
    		if (!value) return true;
    		return data[this.productProps.label] && utils.myIndexOf(data[this.productProps.label], value, true) > -1 ;//忽略大小写
    	},
        checkChange: function(data, checked, indeterminate) { //查询多选树,选择改变时触发
        	var leafNodes = this.$refs.tree.getCheckedNodes(true);
    		this.$refs.tree.filter();
    		this.queryConditions.prdId ="";
    		this.mutiTreeText = "";
    		this.filterText = "";
    		if (leafNodes.length > 0) {
    			// 勾选的资产组合
    			for (var i = 0; i < leafNodes.length; i++) {
    				this.filterText += leafNodes[i].moduleName + ",";
    				if (i == leafNodes.length-1) {		   
    					this.queryConditions.prdId += leafNodes[i].id;
    					this.mutiTreeText += leafNodes[i].moduleName;
        			} else {
        				this.queryConditions.prdId += leafNodes[i].id + ",";
        				this.mutiTreeText += leafNodes[i].moduleName + ",";
        			}
    			}
    		}
    	},
    	//查询条件树 ---------结束
    	
    	//点击编辑按钮  弹出层树 ---------开始
    	filterMethod2: function(val){
     		this.filterText2 = val;
     	},
    	filterNode2: function(value, data){
    		if (!value) return true;
    		return data[this.productProps.label] && utils.myIndexOf(data[this.productProps.label], value, true) > -1 ;//忽略大小写
    	},
        nodeClick: function(obj,data,event) {   // 单选树 点击事件
        	var _this = this;
        	//父节点不处理
        	if(obj.treeModels){
        		return ;
        	}
    		this.mutiTreeText2 = obj.moduleName;
    		this.filterText2 = obj.moduleName;
    		this.formData2.prdId = obj.id;

        	//加载坐席号
        	request.post(this, _this.urls.seatCombobox, {
        		prdId:_this.formData2.prdId
    		}, function(data) {
    				_this.datas = data;
    		});
        	//如果已经选了划款类型,加载账号信息
        	if(_this.formData2.transferType){
        		_this.findAcctByPrdIdAndTransType();
        	}
    	}, 
        //点击编辑按钮  弹出层树 ---------结束
    	
    	onRowClick : function(row, event, column){  //table行点击事件
    		var _this = this;
    		_this.checkInsId = row.id;
    		_this.checkRow = row;
    		_this.formData6.insId = _this.checkInsId;
    		_this.getInsFormData(row.id);
    	},
    	getInsFormData : function(id){
    		var _this = this;
    		request.post(this,this.urls.findInsForm,{
    			id:id
    		},function(data){
        		_this.insInfo = data;
        		_this.attaInfo = data.attaInfo;
        		_this.statusInfo = data.statusInfo;
				var splitter = mini.get('mini-splitter');
	    		splitter.showPane(2);
	    		//splitter.expandPane(2);
	    		_this.setSplitterHeight();
        	});
    	},
    	
    	/*-------------------------------------- 模板选择弹出层 ------------------------------------------*/
    	onTempClick : function(row, event, column){  //模板选择页面 点击确认时
    		var _this = this;
    		_this.checkTempId = row.id;
    	},
    	onPoPQuery : function(){//弹出层 账号查 询      
    		var _this = this;
    		_this.orderPageQuery2 = utils.myAssign({}, this.orderPageQuery2, this.popQueryConditions);
            this.getTempData();     
        },
        getTempData : function(vPara){  //获取模板详情数据
        	var _this=this;
        	var reqData=vPara;
        	if(!reqData)reqData=this.popQueryConditions;
        	reqData.operator = "私有";
        	request.post(this,_this.urls.tempTable,reqData,function(data){
        		_this.tempData=data.rows;
        		_this.totalPage2=data.total;
        	});
        },
        createIns : function(){  //选择模板后,点击确定 
        	var _this = this;
        	if(!_this.checkTempId){
        		var obj={
		        		title:"提示",
		        		text:"请先选择一个模板!",
		        		oKText:"确 定",
		        		cancelText:"取 消",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return ;
        	}
        	_this.firstLoad = true;
        	//_this.isTemplate = true;
        	_this.isWatchPrdId = true;
        	_this.isWatchTransfer = true;
           
        	var para = {templateId:_this.checkTempId};
        	_this.getTemplateData(para);
        	_this.dialogFormVisible = false;
        	_this.popQueryConditions.templateName = "";
        },
        
        /*----------------------------指令编辑弹出层----------------------------------------*/
        onCancel2 : function(){
        	this.dialogFormVisible2 = false;
        	//this.$refs.popTree.setCheckedKeys([]); 
        	//this.mutiTreeText2 = "";
        	this.formData2.prdId = '';
        	this.formData2.payeeAmount = '';
        	this.formData2.bigPayeeAmount = '';
            this.$refs['formData2'].resetFields();
            this.$refs['selectTree-' + 'formData2'].empty();
            this.isClear = false;
        },
		popAcctInfo : function(key){  //弹出账号选择页面
			this.pop3Status = key;
			this.dialogFormVisible3 = true
			this.checkAcctId = '';
        	this.checkAcctRow = {};
        	
        	this.acctQueryConditions = utils.myAssign({}, this.acctQueryConditions, this.queryInit3);
        	this.orderPageQuery3 = utils.myAssign({}, this.orderPageQuery3, this.queryInit3);
        	
        	if("payee"==key && "00088014"==this.formData2.transferType){
        		this.acctQueryConditions.acctType = "00084004";
        	}
        	this.orderPageQuery3 = utils.myAssign({}, this.orderPageQuery3, this.acctQueryConditions);
			this.getAcctData();
		},
		getAcctData:function(vPara){  //获取账号信息
        	var _this=this;
        	var reqData=vPara;
        	if(!reqData)reqData=this.acctQueryConditions;
        	request.post(this,this.urls.acctTable,reqData,function(data){
        		_this.acctData=data.rows;
        		_this.totalPage3=data.total;
        	});
        },
        onAcctQuery : function(){  // 账号选择页面 查询按钮
        	var _this = this;
        	_this.orderPageQuery3 = utils.myAssign({}, this.orderPageQuery3, this.acctQueryConditions);
        	this.getAcctData(); 
        },
        /*--------------------账号选择弹出层-------------------------------*/
        onCancel3:function(){
        	this.dialogFormVisible3 = false;
            this.$refs['formData3'].resetFields();
        },
        onCancel4:function(){
        	this.dialogFormVisible4 = false;
            this.$refs['formData4'].resetFields();
        },
        onCancel5:function(){
        	this.dialogFormVisible5 = false;
            this.$refs['formData5'].resetFields();
        },
        onCancel6:function(){
        	this.dialogFormVisible6 = false;
            this.$refs['formData6'].resetFields();
            this.attaManageFileList = [];
        },
        onCancel7:function(){
        	this.dialogFormVisible7 = false;
            this.$refs['formData7'].resetFields();
        },
        onCancel8:function(){
        	this.dialogFormVisible8 = false;
        },
        /* onCancel9:function(){
        	this.dialogFormVisible9 = false;
        }, */
        onAcctClick:function(row, event, column){
        	this.checkAcctId = row.id;
        	this.checkAcctRow = row;
        },
        onHandleSizeChange2:function(val) {//每页条数改变
        	var _this=this;
            this.pageSize2=val;
            this.orderPageQuery2[gobal.pagination.rows]=this.pageSize2;
            this.popQueryConditions[gobal.pagination.rows]=this.pageSize2;
            this.getTempData(this.orderPageQuery2);
        },
        onHandleCurrentChange2:function(val) {//当前页改变
        	var _this=this;
            this.currentPage2 = val;
            this.orderPageQuery2[gobal.pagination.page]=val;
            this.popQueryConditions[gobal.pagination.page]=val;
            this.getTempData(this.orderPageQuery2);
        },
        onHandleSizeChange3:function(val) {//每页条数改变
        	var _this=this;
            this.pageSize3=val;
            this.orderPageQuery3[gobal.pagination.rows]=this.pageSize3;
            this.acctQueryConditions[gobal.pagination.rows]=this.pageSize3;
            this.getAcctData(this.orderPageQuery3);
        },
        onHandleCurrentChange3:function(val) {//当前页改变
        	var _this=this;
            this.currentPage3 = val;
            this.orderPageQuery3[gobal.pagination.page]=val;
            this.acctQueryConditions[gobal.pagination.page]=val;
            this.getAcctData(this.orderPageQuery3);
        },
		onCheckAcct : function(){  //选择账号后  点击确定
			var _this = this;
			var curStatus = _this.pop3Status;
			var acctId = this.checkAcctId;
			var row = this.checkAcctRow;
			if('payee' == curStatus){
				_this.formData2.payeeAcctNo = row.acctCode;
				_this.formData2.payeeAcctId = row.id;
				_this.formData2.payeeAcctName = row.acctName;
				_this.formData2.payeeAcctBankName = row.openAcctBrbankName;
				_this.formData2.payeeLargePayNo = row.largePayNo;		
				_this.formData2.payeeAcctBankCode = row.openAcctBank;
				_this.formData2.payeeUniteCode = row.uniteCode;
				_this.formData2.payeeCurrency = row.currency;
				//资金账户 加载出机构，并且加载出账号中选中的席位
				if("00088014"==_this.formData2.transferType){
					_this.formData2.orgId = row.acctOrg;
					_this.formData2.seatNos = row.seatNo;
				}
			}
			if('payer' == curStatus){
				_this.formData2.draweeAcctNo = row.acctCode;
				_this.formData2.draweeAcctId = row.id;
				_this.formData2.draweeAcctName = row.acctName;
				_this.formData2.draweeAcctBankName = row.openAcctBrbankName;
				_this.formData2.draweeLargePayNo = row.largePayNo;		
				_this.formData2.draweeAcctBankCode = row.openAcctBank;
				_this.formData2.draweeUniteCode = row.uniteCode;
				_this.formData2.currency = row.currency;
			}
			this.dialogFormVisible3 = false;
			this.acctQueryConditions.qSearch = '';
			this.acctQueryConditions.acctType = '';
		},
		onDateRangeChange: function(val, objFormData, rangeBeginKey, rangeEndKey) {
            objFormData[rangeBeginKey] = utils.isEmpty(val) ? '' : val.indexOf(" - ") == -1 ? '' :  val.split(" - ")[0];
            objFormData[rangeEndKey] = utils.isEmpty(val) ? '' : val.indexOf(" - ") == -1 ? '' :  val.split(" - ")[1];
        },
        /*------------------------------------------  头部按钮事件------------------------------------------*/
    	popTemplateTable : function(){//点击从模板新建按钮 弹出模板选择table
    		var _this = this;
    		_this.getTempData();
    		_this.checkTempId = '';
    		_this.dialogFormVisible = true;
    	},
    	onSure : function(status){  //头部按钮 确认
    		var _this = this;
    		this.commonQuery =false;
    		var curStatus = status;
    		if(curStatus == 1){
    			if(!_this.checkAuth("sure")){
    				var obj={
    		        		title:"提示",
    		        		text:"操作权限不足!",
    		        		oKText:"确 定",
    		        		cancelText:"取 消",
    		        		type:"warning"
    		        	};
    				gobal.openComfirm(_this, obj, function() {
    				});
    				return;
    			}
    			if(!_this.noCheckIns()){
    				return;
    			}
    			var obj={
    	        		title:"提示",
    	        		text:"确定执行该操作?",
    	        		oKText:"确 定",
    	        		type:"warning"
    	        	};
    			gobal.openComfirm(this, obj, function() {
    	    		request.post(_this,_this.urls.sureAndRollback,{
    	    			ids:_this.selections.strIds,
    	    			status : curStatus
    	    		},function(data){
    	    			if(!data.success){
    	    				_this.msgList = data.obj;
    	    				_this.dialogFormVisible8 = true;
    	    				_this.handleMsg = data.msg;
    	    			}else{
    	    				_this.msgList = [];
    	    				_this.dialogFormVisible8 = false;
    	    				_this.handleMsg = "";
    	    				data.msg = "共"+data.msg.split(",")[0]+"条,全部处理成功!";
    	    				gobal.messageShow(_this,data);
    	    			}
    	            	_this.getTableData();
    	        	});
    			});
    		}
    		if(curStatus == 0){
    			if(!_this.checkAuth("back")){
    				var obj={
    		        		title:"提示",
    		        		text:"操作权限不足!",
    		        		oKText:"确 定",
    		        		cancelText:"取 消",
    		        		type:"warning"
    		        	};
    				gobal.openComfirm(_this, obj, function() {
    				});
    				return;
    			}
    			_this.popRemark('back');
    		}
    	},
    	checkAuth : function(val){  //检查用户  点击确认与退回时 是否有操作权限
    		var _this = this;
    		var flag = true;
    		var authList;
    		var selectData = _this.selections.arrRows;
    		if("sure" == val){
    			authList = _this.sureAuthList;
    		}
    		if("back" == val){
    			authList = _this.backAuthList;
    		}
    		for(var i=0;i<selectData.length;i++){
    			if(!_this.checkAuthIsExist(selectData[i].auditProcessStatusCode,authList)){
    				if("sure" == val && "00133004" == selectData[i].auditProcessStatusCode){
    					continue;
    				}
    				if("back" == val && "00133001" == selectData[i].auditProcessStatusCode){
    					continue;
    				}
    				flag = false;
    			}
    		}
    		return flag;
    	},
    	checkAuthIsExist : function(val,options){ //判断val 是否存在与authList 中
        	var flag = false;
        	for(var i=0;i<options.length;i++){
        		if(options[i] == val){
        			flag = true;
        		}
        	}
        	return flag;
        },
    	onBack : function(){  // 头部按钮 退回
    		var _this = this;
    		request.post(_this,_this.urls.sureAndRollback,{
    			ids:_this.selections.strIds,
    			status : "0",
    			remark : _this.formData4.remark,
    		},function(data){
    			_this.onCancel4();
    			if(!data.success){
    				_this.msgList = data.obj;
    				_this.dialogFormVisible8 = true;
    				_this.handleMsg = data.msg;
    			}else{
    				_this.msgList = [];
    				_this.dialogFormVisible8 = false;
    				_this.handleMsg = "";
    				data.msg = "共"+data.msg.split(",")[0]+"条,全部处理成功!";
    				gobal.messageShow(_this,data);
    			}
            	_this.getTableData();
        	});
    	},
		onChangeStates : function(){ //撤回 作废  暂停 恢复 按钮点击触发
			var _this=this;
            this.$refs["formData4"].validate(function(valid){
                if (valid) {                	
                	_this.submitChangeStates();                   
                } else {
                    return false;
                }
            });
			
		},
		submitChangeStates : function(){
			var _this = this;
    		var curStatus = _this.formData4.curStatus;
    		
    		if("back" == curStatus){
    			_this.onBack();
    			return ;
    		}
    		var a = _this.formData4.remark;
    		request.post(_this,_this.urls.changeInsStatus,{
    			ids:_this.selections.strIds,
    			status : curStatus,
    			remark : _this.formData4.remark,
    		},function(data){
    			_this.onCancel4();
    			if(!data.success){
    				_this.msgList = data.obj;
    				_this.dialogFormVisible8 = true;
    				_this.handleMsg = data.msg;
    			}else{
    				_this.msgList = [];
    				_this.dialogFormVisible8 = false;
    				_this.handleMsg = "";
    				data.msg = "共"+data.msg.split(",")[0]+"条,全部处理成功!";
    				gobal.messageShow(_this,data);
    			}
            	_this.getTableData();
        	});
		},
		back : function(){
			var splitter = mini.get('mini-splitter');
			if(splitter){
				splitter.hidePane(2);
	    		splitter.showPane(1);
	    		splitter.expandPane(1);
	    		this.setSplitterHeight();
			}
		},
		onDateChange : function(val, obj){  //时间控件
			var _this = this;
			_this.formData2.transferDate = val;
		},
		onQueryDateChange : function(val, obj){   //时间控件
			var _this = this;
			_this.queryConditions.transferDate = val
		},
		popRemark : function(key){ 
			var _this = this;
			this.commonQuery =false;
			if(!_this.noCheckIns()){
				return;
			}
			this.formData4.curStatus = key;
			this.dialogFormVisible4 = true;
			if("back" == key){
				_this.formData4title = '回退';
				_this.formData4lable = '回退原因';
			}else if("revoked" == key){
				_this.formData4title = '撤销';
				_this.formData4lable = '撤销原因';
			}else if("invalid" == key){
				_this.formData4title = '作废';
				_this.formData4lable = '作废原因';
			}else if("stop" == key){
				_this.formData4title = '暂停';
				_this.formData4lable = '暂停原因';
			}else if("reply" == key){
				_this.formData4title = '恢复';
				_this.formData4lable = '恢复原因';
			}else{
				_this.formData4title = '操作';
				_this.formData4lable = '操作原因';
			}
		},
		noCheckIns : function(){
			var _this = this
			if(!_this.selections.strIds){
    			var obj={
		        		title:"提示",
		        		text:"请先选择需要操作的指令!",
		        		oKText:"确 定",
		        		cancelText:"取 消",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return false;
    		}
			return true;
		},
		getTemplateData:function(objKey){//获取模板表单数据 - form2
        	var _this=this; 
        	request.post(this,this.urls.templateDetail,objKey,function(data){
        		data.id = _this.formData2.id;
        		utils.formDataCopy(_this.formData2, data);
        		_this.$refs['selectTree-formData2'].setCheckedKeys((_this.formData2.prdId || "").split(","));
        		if (_this.formData2.transferAmount != null) {
        			_this.formData2.bigTransferAmount= utils.convertCurrency(_this.formData2.transferAmount.replace(/,/g,""));	
        		}
        		if (_this.formData2.payeeAmount != null) {
        			_this.formData2.bigPayeeAmount= utils.convertCurrency(_this.formData2.payeeAmount.replace(/,/g,""));	
        		}
        		if(_this.formData2.prdName){
        			_this.mutiTreeText2 = _this.formData2.prdName;
        		}else{
        			_this.mutiTreeText2 = "";
        		}
        		if(_this.formData2.bizDateB && _this.formData2.bizDateE){
        			var dateB = new Date(_this.formData2.bizDateB);
            		var dateE = new Date(_this.formData2.bizDateE);
            		var newDateB = dateB.getFullYear() + "-" + 
            						((dateB.getMonth()+1)<10 ? "0" + (dateB.getMonth()+1) : (dateB.getMonth()+1)) + "-" + 
            						((dateB.getDate() < 10) ? "0" + dateB.getDate() : dateB.getDate());			
             	    var newDateE = dateE.getFullYear() + "-" + 
             	    				((dateE.getMonth()+1)<10 ? "0" + (dateE.getMonth()+1) : (dateE.getMonth()+1)) + "-" + 
             	    				(dateE.getDate() < 10 ? "0" + dateE.getDate() : dateE.getDate());
            		_this.formData2.dateRange = [newDateB+"",newDateE+""];
        		}
        		_this.formData2.transferDate = gobal.getNowDate();
        		
        	});     	
        },
        popCreateTemp : function(){  //通过指令生成模板
			var _this = this;
			this.commonQuery =false;
        	var chickIds = _this.selections.arrIds;

        	if(chickIds.length == 0){
        		var obj={
		        		title:"提示",
		        		text:"请先选择一条指令!",
		        		oKText:"确 定",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
        	} else if(chickIds.length > 1){
        		var obj={
		        		title:"提示",
		        		text:"只能选择一条指令复制为模板!",
		        		oKText:"确 定",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
        	}
			
        	_this.dialogFormVisible5 = true;
        },
        createTemp : function(){  //创建模板
        	var _this = this;
        	this.$refs["formData5"].validate(function(valid){
        		if(valid){
        			_this.submitTemp();
        		}
        	});
        },
        submitTemp : function(){
        	var _this = this;
        	_this.formData5.id = _this.checkInsId;
        	request.post(this,_this.urls.createTemp,_this.formData5,function(data){
        		if(data.success){
        			_this.dialogFormVisible5 = false;
        		}	
        		gobal.messageShow(_this,data);
        	});
        },
        checkStatus :function(row,type){  //当前全部
        	var _this = this;
        	if("DVP" == type){
        		if(_this.transferTypeList.dvpType.indexOf(row.transferTypeCode) != -1){
        			return true;
        		}else{
        			return false;
        		}
        	}
        	if("TA" == type){
        		if(_this.transferTypeList.taType.indexOf(row.transferTypeCode) != -1){
        			return true;
        		}else{
        			return false;
        		}
        	}
        	if("OTHER" == type){
        		if(_this.transferTypeList.allType.indexOf(row.transferTypeCode) != -1){
        			return false;
        		}else{
        			return true;
        		}
        	}
        }, 
        checkSeachType :function(transferTypeCode){  //当前全部
        	var _this = this;
       		if(_this.transferTypeList.dvpType.indexOf(transferTypeCode) != -1){
       			return "DVP";
       		}
       		if(_this.transferTypeList.taType.indexOf(transferTypeCode) != -1){
       			return "TA";
       		}
        	return '';
        }, 
        popAcctTable : function(){  // 弹出账号table
        	var _this = this;
        	_this.getTempData();
        	_this.checkTempId = '';
        	_this.dialogFormVisible = true;
        },
        //TA
        taDataRowClassName:function(row,index){
        	if(row.colorSign == '1'){
        		return 'taDataShow';
        	}
        },
        tableRowClassName:function(row, index){ //行颜色变更
        	if(row["bankHandleStatusCode"] == "202"){ //错误添加颜色--银行处理状态
				return 'error-row';
			}
        	/* if(row["faxSendStatusCode"] == "00175005"){ //错误添加颜色--传真机处理状态
				return 'error-row';
			} */
        	if(row["pauseFlag"] == "1"){ //暂停添加颜色
				return 'other-row';
			}
        	if(row["processFlagCode"] == "00132006"){ //撤销添加颜色
				return 'cancel-row';
			}
        	if(row["processFlagCode"] == "00132003"){ //已发送添加颜色
				return 'has-send-row';
			}
        	if(row["processFlagCode"] == "00132001"){ //待处理添加颜色
				return 'wait-handle-row';
			}
        	return 'other-row'; //其他颜色
        },
        transferTypeChange : function(val){ //划款类型改变事件
        	var _this = this;
        	if("00088014" == val){ //席位信息，仅付券商佣金可编辑，其他划款类型均不可编辑
        		_this.state2.seatNo = false;
        	}else{
        		_this.state2.seatNo = true;
        		_this.formData2.seatNo = "";
        		for(var i in _this.datas) {
					_this.datas[i]["checked"] = false;
					_this.allChecked = false;
				}
        	}
        	var showRange = _this.showRangeOptions;
        	if(_this.checkIsExist(val,showRange)){ //付****费类的指令，开始日期，截止日期才可编辑，其他划款类型不可编辑
        		if(_this.currentState != "read"){
					_this.state2.dateRange = false;
				}
        		if(_this.currentState == "add"){ //新增 时,时间范围 取划款日期
        			_this.formData2.bizDateB = _this.formData2.transferDate;
            		_this.formData2.bizDateE = _this.formData2.transferDate; 
            		//（默认值取划款日期）
                	_this.formData2.dateRange = [_this.formData2.bizDateB,_this.formData2.bizDateE];
        		}
        	}else{
        		_this.state2.dateRange = true;
        		_this.formData2.bizDateB = "";
        		_this.formData2.bizDateE = "";
        		//（默认值取划款日期）
            	_this.formData2.dateRange = [_this.formData2.bizDateB,_this.formData2.bizDateE];
        	}

        	var showOrg = _this.showOrgOptions; 
        	var showSec = _this.showSecOptions; 
        	if(_this.checkIsExist(val,showSec)){//证券代码/证券名称:  仅新股申购、新债申购指令可编辑（暂未支持）
        		_this.state2.secCode = false;
        		_this.state2.secName = false;
        	}else{
        		_this.state2.secCode = true;
        		_this.state2.secName = true;
        		_this.formData2.secCode = '';
        		_this.formData2.secName = '';
        	}
        	// 
        	/**---------------------划款类型改变时,获取账号信息---------------------------------*/
       	 	/* if(_this.currentState == "add"){
       	 		if(!_this.isTemplate){
       	 			_this.findAcctByPrdIdAndTransType();
       	 			_this.findUseAndRemarkByType();
       	 		}else{
	       	 		if(_this.firstLoad){
		    			_this.firstLoad = false;
		    		}else{
		    			_this.findAcctByPrdIdAndTransType();
		    			_this.findUseAndRemarkByType();
		    		}
       	 		}
       	 	}else{
	       	 	if(_this.firstLoad){
	    			_this.firstLoad = false;
	    		}else{
	    			_this.findAcctByPrdIdAndTransType();
	    			_this.findUseAndRemarkByType();
	    		}
       	 	} */
        	
        	if("00088083" == val || "00088084" == val || "00088085" == val){
        		_this.state2.payeeAmountAndCurrency = true;
        		_this.transferAmountLabelText = '付款金额';
        	}else{
        		_this.state2.payeeAmountAndCurrency = false;
        		_this.transferAmountLabelText = '划款金额';
        		this.formData2.payeeAmount = '';
            	this.formData2.bigPayeeAmount = '';
        	}
        },
        findAcctByPrdIdAndTransType : function(){//根据资产组合和划款类型自动加载账号
        	
        	var _this = this;
        	var transferType = _this.formData2.transferType;
        	var prdId = _this.formData2.prdId;
        	var orgId = _this.formData2.orgId;
        	request.post(_this,_this.urls.autoFindAcctInfo,{
        		transferType:transferType,
        		prdId:prdId,
        		orgId:orgId
        	},function(data){
				_this.formData2.payeeAcctNo = data.payeeAcctNo;
				_this.formData2.payeeAcctId = data.payeeAcctId;
				_this.formData2.payeeAcctName = data.payeeAcctName;
				_this.formData2.payeeAcctBankName = data.payeeAcctBankName;
				_this.formData2.payeeLargePayNo = data.payeeLargePayNo;		
				_this.formData2.payeeAcctBankCode = data.payeeAcctBankCode;
				_this.formData2.payeeUniteCode = data.payeeUniteCode;
				
				_this.formData2.draweeAcctNo = data.draweeAcctNo;
				_this.formData2.draweeAcctId = data.draweeAcctId;
				_this.formData2.draweeAcctName = data.draweeAcctName;
				_this.formData2.draweeAcctBankName = data.draweeAcctBankName;
				_this.formData2.draweeLargePayNo = data.draweeLargePayNo;		
				_this.formData2.draweeAcctBankCode = data.draweeAcctBankCode;
				_this.formData2.draweeUniteCode = data.draweeUniteCode;
        	});
        },
        findUseAndRemarkByType : function(){
        	var _this = this;
        	var transferType = _this.formData2.transferType;
        	request.post(_this,_this.urls.findUseAndRemarkByType,{
        		transferType:transferType,
        	},function(data){
				_this.formData2.transferUse = data.transferPurpose;
				_this.formData2.transferRemark = data.transferRemark;
        	});
        },
        checkIsExist : function(val,options){ //判断val 是否存在与options 字典集合中
        	var flag = false;
        	for(var i=0;i<options.length;i++){
        		if(options[i].ddName == val){
        			flag = true;
        		}
        	}
        	return flag;
        },
		/******多选下拉框的事件*******/
		toggle:function(event) {
			event.stopPropagation();
		},
		onChange: function(event,item,index) {
			if(item!=null)
			{
				this.datas[index]["checked"]=event.target.checked;
			}else{
				this.datas.forEach(function(item){  
					item["checked"]=event.target.checked;
				});
				//this.allText=(event.target.checked?"反选":"全选");
			}
			this.getSelectVal(this.datas);
		},
		getSelectVal: function(items) {
			this.formData2.seatNo="";
			this.selValue="";
			for(var i=0;i<items.length;i++){
				if(items[i].checked){
					this.formData2.seatNo+=(this.formData2.seatNo.length>0?",":"")+items[i].seatNo;
					this.selValue+=(this.selValue.length>0?",":"")+items[i].id;
				}
			}
			var arrSel=this.formData2.seatNo.split(",");
			this.allText=(this.formData2.seatNo==""||arrSel.length!=this.datas.length?"全选":"反选");
			this.allChecked=(arrSel.length==this.datas.length?true:false);
		},
		inputFilter : function(e) {//这个空函数是必须的，解决多选下拉的问题
		},
		
		/** ------------------------------附件管理----------------------------------- */
		onDownloadFile : function(index, rows){  // 单个附件下载
			var _this = this;
			var para={id:rows[index].id};
   			try{
	        	UrlUtils.download(_this.urls.downloadOne,para, true);
        	}catch(e){
        		gobal.messageShow(_this, {success: false, msg: "下载失败！"});
        	}
		},
		getAttaDataDetail:function(objKey){  //获取单个附件信息 详情
			var _this = this;
			request.post(this,this.urls.attaForm,objKey,function(data){
        		utils.formDataCopy(_this.formData6, data);	
			});
		},
		onEditFile : function(index, rows){   //修改附件
			var _this = this;
			if("00139001" == rows[index].attaTypeCode){
				var obj={
		        		title:"提示",
		        		text:"划款指令文件无法修改!",
		        		oKText:"确 定",
		        		cancelText:"取 消",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
			}
			var insInfo = _this.checkRow;
			if(insInfo.auditProcessStatusCode != "00133001"){
				var obj={
		        		title:"提示",
		        		text:"指令状态不是待处理,无法修改附件!",
		        		oKText:"确 定",
		        		cancelText:"取 消",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
			}
			var rowData = rows[index];
			_this.fileChange = false;
   			_this.currentState6 = "edit";
   			_this.dialogFormVisible6 = true;
   			//_this.formData6 =JSON.parse(JSON.stringify(rowData));
   			var para={id:rows[index].id};
   			_this.getAttaDataDetail(para);
   			if(rows[index].attaName){
   				var fileName =  rowData.attaName;
        		var fileSuffix = rowData.suffix;
        		_this.attaManageFileList.push({
					name : fileName,
					url: ctxPath + rowData.attaPath
				}); 
   			}
		},
		onDeleteFile : function(index, rows){ //删除文件
			var _this = this;
			if("00139001" == rows[index].attaTypeCode){
				var obj={
		        		title:"提示",
		        		text:"划款指令文件无法删除!",
		        		oKText:"确 定",
		        		cancelText:"取 消",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
			}
			
			var insInfo = _this.checkRow;
			if(insInfo.auditProcessStatusCode != "00133001"){
				var obj={
		        		title:"提示",
		        		text:"指令状态不是待处理,无法删除附件!",
		        		oKText:"确 定",
		        		cancelText:"取 消",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
			}
			
			var obj=gobal.getComfirmInfo(dictFormState.del);
			gobal.openComfirm(_this,obj,function(){
				request.post(_this,_this.urls.attaDel,{id:rows[index].id},function(data){
	        		if(data.success){
	            		_this.getInsFormData(_this.checkInsId);
	        		}	
	        		gobal.messageShow(_this,data);
	        	});
			});	
		},
		attaManageUploadChange : function(file, fileList) {  //附件 变更事件
			var _this = this;
			this.formData6.attaName = file.name;
			//this.$refs['formData-' + 'attaManage'].validate();
			var fileType = file.name.substring(file.name.lastIndexOf('.') + 1);
			/* if ('pdf' == fileType || 'doc' == fileType || 'docx' == fileType) { */// || 'doc' == fileType || 'docx' == fileType
				if (fileList.length > 1) { 
					fileList.splice(0, 1);
				}
				this.fileChange = true;
				this.formData.editUploadChange = true;
			/* } else {
				this.$message.error('只能上传格式为pdf、doc、docx的文件');
				fileList.splice(fileList.length - 1, 1);
				this.formData.editUploadChange = false;
			}		 */	
		},
		attaManageUploadSuccess: function(response, file, fileList) { //附件上传成功回调函数
			var _this = this;
    		_this.attaManageFileList = [];
    		_this.dialogFormVisible6 = false;
     		gobal.messageShow(_this,response);
     		_this.getInsFormData(_this.checkInsId);
    	},
    	//下载
    	attaManagePreview: function(file) {
 	    	UrlUtils.download(file.url, null, true);
 	    },
 	    //文件删除触发事件
 	   	attaManageRemove : function(file, fileList) {
			this.formData6.attaName = '';
   			this.formData6.orderFormatAttaID = '';
		},
		//上传文件的Click事件
		submitUpload : function(formKeyName) {
			this.$refs['attaManage-upload'].submit();
		},
		//上传文件之前的触发(点击选择文件后)
		handleBeforeUpload: function(file) {    		
   			/* const isDoc = (file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') 
   			|| (file.type ==='application/msword') || (file.type ==='application/pdf');
   	        if (!isDoc) {
   	          this.$message.error('请上传pdf、doc、docx格式的文件!');
   	        }
   	        return isDoc; */
   	        return true;
   		},
   	    //是否显示操作按钮
   		toolShow:function(row,type){  //下载单个文件   			
   			if("成交单" == row.attaTypeCode){
   				return false;
   			}
   			if("00139001" == row.attaTypeCode){
   				return false;
   			}
   			return true;   			
   		},   		
   		//下载模板文件
   		onDownload:function(index,rows){  //下载单个文件
   			var _this = this;
   			var para={id:rows[index].id};
   			try{
	        	UrlUtils.download(_this.urls.download,para, true);
        	}catch(e){
        		gobal.messageShow(_this, {success: false, msg: "下载失败！"});
        	}
   		},
   		popUploadForm:function(){  //弹出附件 新增 编辑框
   			var _this = this;
   			_this.currentState6 = "upload";
   			_this.formData6.id = "";
   			_this.dialogFormVisible6 = true;
   		},
	   	onSubmit6:function(formName){   //附件 新增 编辑框提交
	        var _this=this;
	        this.$refs[formName].validate(function(valid){
	            if (valid) {
	            	if("upload" == _this.currentState6){
	            		$("#attaManage-uploadButton").click();
	            	}
	            	if("edit" == _this.currentState6){
	            		if(_this.fileChange){
	            			$("#attaManage-uploadButton").click();
		            	}else{
		            		request.post(_this,_this.urls.attaEdit,_this.formData6,function(data){
	        	        		if(data.success){
	        	            		_this.attaManageFileList = [];
	        	            		_this.dialogFormVisible6 = false;
	        	            		_this.getInsFormData(_this.checkInsId);
	        	        		}	
	        	        		gobal.messageShow(_this,data);
	        	        	});
		            	}
	            	}
	            } else {
	            	return false;
	            }
	         });
	     },
	     batchDelAtta : function(){  //右下附件部分  批量删除
			var _this = this;
			if(!_this.attaSelections.strIds){
	     		var obj={
		        		title:"提示",
		        		text:"请先选择附件!",
		        		oKText:"确 定",
		        		cancelText:"取 消",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
	     	}
			var arrRows = _this.attaSelections.arrRows;
			var flag = false;
			var text = "";
			for(var key in arrRows){
				if("00139001" == arrRows[key].attaTypeCode){
					flag = true;
					text = "划款指令文件无法删除!";
				}
				if("成交单" == arrRows[key].attaTypeCode){
					flag = true;
					text = "成交单文件无法删除!";
				}
			}
			
			var insInfo = _this.checkRow;
			if(insInfo.auditProcessStatusCode != "00133001"){
				flag = true;
				text = "指令状态不是待处理,无法删除附件!";
			}
			
			if(flag){
				var obj={
		        		title:"提示",
		        		text:text,
		        		oKText:"确 定",
		        		cancelText:"取 消",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
			}
			
			var obj=gobal.getComfirmInfo(dictFormState.del);
			gobal.openComfirm(_this,obj,function(){
				request.post(_this,_this.urls.batchAttaDel,{ids:_this.attaSelections.strIds},function(data){
	        		if(data.success){	
	            		_this.getInsFormData(_this.checkInsId);
	        		}	
	        		gobal.messageShow(_this,data);
	        	});
			});	
	     },
	     batchDownload : function(){  //右下附件部分 批量下载
			var _this = this;
	     	if(!_this.attaSelections.strIds){
	     		var obj={
		        		title:"提示",
		        		text:"请先选择附件!",
		        		oKText:"确 定",
		        		cancelText:"取 消",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
	     	}
			var para={ids:_this.attaSelections.strIds};
   			try{
	        	UrlUtils.download(_this.urls.batchDownload,para, true);
        	}catch(e){
        		gobal.messageShow(_this, {success: false, msg: "下载失败！"});
        	}
	    },
	 	celldblclick : function(row, column, cell, event){  //单元格 双击事件
		 	var _this=this;
	        if(column.label == '文件名' && row.suffix.toLowerCase() == 'pdf'){
	        	var para={
       				attaPath:row.attaPath,
       				attaName:row.attaName,
       				id:row.id,
       				insId:row.insId,
       			};
	       		request.post(this, _this.urls.pdfPreviewOnline, para, function(data) {
	       			if(data.success){
	       				var url = ctxPath + '/jslib/generic/web/viewer.jsp?file='+data.obj;
		    			window.open(url,"_blank");
	       			}else{
	       				gobal.messageShow(_this,data);
	       			}
		    		
		    	});
	        	//UrlUtils.download(_this.urls.PdfPreview,para, true);
	        }
	    },	
	    onPreView : function(index, rows){//预览附件
	    	var _this = this;
	    	if(rows[index].suffix.toLowerCase() != 'pdf'){
	    		var obj={
		        		title:"提示",
		        		text:"只能预览PDF格式的文件!",
		        		oKText:"确 定",
		        		cancelText:"取 消",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
	    	}
	    	var para={
				attaPath:rows[index].attaPath,
				attaName:rows[index].attaName,
				id:rows[index].id,
				insId:rows[index].insId,
      		};
	    	request.post(this, _this.urls.pdfPreviewOnline, para, function(data) {
	    		if(data.success){
	    			var url = ctxPath + '/jslib/generic/web/viewer.jsp?file='+data.obj;
	    			window.open(url,"_blank");
	    		}else{
       				gobal.messageShow(_this,data);
       			}
	    		
	    	});
        	//UrlUtils.download(_this.urls.PdfPreview,para, true);
	    },
	    downloadCheckAtta : function(){ //头部按钮下载附件
	    	var _this = this;
	    	this.commonQuery =false;
	    	if(!_this.noCheckIns()){
				return;
			}
	    	var para={ids:_this.selections.strIds};
	    	//检查选择的指令是否存在附件
	    	request.post(this, _this.urls.checkAttaIsExist, para, function(data) {
				if(data.success){//如果有附件 下载
		   			try{
			        	UrlUtils.download(_this.urls.downloadByInsIds,para, true);
		        	}catch(e){
		        		gobal.messageShow(_this, {success: false, msg: "下载失败！"});
		        	}
				}else{  //没有附件 提示额
					gobal.messageShow(_this,data);
				}
			});	
	    },
	    popUpdateDate : function(val){  //弹出发送类型 弹出框
	    	var _this = this;
	    	this.commonQuery =false;
	    	if(!_this.noCheckIns()){
				return;
			}
	    	_this.formData7.transferDate = "";
   			_this.dialogFormVisible7 = true;	
	    }, 
	    sendIns : function(){   //点击指令发送类型弹出框   确定发送
	    	var _this = this;
	    	var key = _this.currentState7;
	    	if("send" == key){
	    		_this.send();
	    	}
	    	if("sendCancel" == key){
	    		_this.cancelSend();
	    	}
	    },
	    orgChange : function(val){ //机构change事件
	    	var _this = this;
	    	var orgData = _this.orgNameOptions;
	    	var orgName = '';
	    	for(var i = 0;i<orgData.length;i++){
	    		if(orgData[i].id == val){
	    			orgName = orgData[i].orgName;
	    		}
	    	}
	    	//当机构发生改变时,将机构名称存入formData
	    	_this.formData2.orgName = orgName;
	    	//加载坐席号
        	request.post(this, _this.urls.seatCombobox, {
        		accountId: _this.formData2.payeeAcctId,
        		prdId:_this.formData2.prdId,
        		orgId:val
    		}, function(data) {
    				_this.datas = data;
    				var seatNos;
    				if(_this.currentState == "add"){
    					seatNos = _this.formData2.seatNos;
    				}else{
    					if(_this.orgFirstload){
    						_this.orgFirstload = false;
    						seatNos = _this.formData2.seatNo;
    					}else{
    						seatNos = _this.formData2.seatNos;
    					}
    				}
    				
    				_this.datas.forEach(function(item){ 
    					if(seatNos.indexOf(item["seatNo"])>=0){
    						item["checked"]=true;
    					}
    				});
    				_this.getSelectVal(_this.datas);
    		});
	    },
	    orgTypeChange : function(val){ //查询条件中的机构 根据机构类型来加载
	    	var _this = this;
	    	request.post(this, _this.urls.findOrgInfoCombobox1, {
	    		itemKey : val
	    	}, function(data) {
				_this.queryOrgNameOptions = data;
			});
	    },
	    numberClick : function(){ //查询出异常指令列表
	    	var _this = this;
	    	_this.getFailData();
	    },
	    auditNumberClick : function(){
	    	var _this = this;
	    	_this.getAuditFailData();
	    },
	    getFailData : function(){
	    	var _this = this;
	    	request.post(this, _this.urls.findFailIns, {}, function(data) {
				_this.failData = data;
				_this.stateInfo1 = data.length;
			});
	    },
	    getAuditFailData : function(){
	    	var _this = this;
	    	request.post(this, _this.urls.findFailAudit, {}, function(data) {
				_this.failAuditData = data;
				_this.auditStateInfo = data.length;
			});
	    },
	    getStatusCountData : function(reqData){
	    	var _this = this;
	    	request.post(this, _this.urls.getStatusCountData, reqData, function(data) {
				utils.formDataCopy(_this.statusCountData, data);
			});
	    },
	    
	    updateTransferDate : function(){
	    	var _this = this;
			var para={
				ids:_this.selections.strIds,
				transferDate : _this.formData7.transferDate,
			};

            this.$refs["formData7"].validate(function(valid){

                if (valid) {                	
                	request.post(_this,_this.urls.updateTransferDate,para,function(data){
        				_this.dialogFormVisible7 = false;
                   		if(!data.success){
            				_this.msgList = data.obj;
            				_this.dialogFormVisible8 = true;
            				_this.handleMsg = data.msg;
            			}else{
            				_this.msgList = [];
            				_this.dialogFormVisible8 = false;
            				_this.handleMsg = "";
            				data.msg = "共"+data.msg.split(",")[0]+"条,全部处理成功!";
            				gobal.messageShow(_this,data);
            			}
                   		_this.getTableData(); 
                   	});	
                } else {
                    return false;
                }
            });
	    },
	    transferDateChange : function(val){
	    	var _this = this;
	    	_this.formData7.transferDate = val;
	    },
	    payShow : function(insForm){
	    	if("00141002" == insForm.insFileType){
	    		return false;
	    	}
	    	return true;
	    },
	    queryBankHandleInfo : function(){//查询更新按钮---查询银行处理状态
	    	var _this = this;
	    	this.commonQuery =false;
	    	if(!_this.noCheckIns()){
				return;
			}
	    	request.post(_this,_this.urls.queryBankHandleInfo,{
    			ids:_this.selections.strIds,
    			dateB : _this.queryConditions.bizDateB,
    			dateE : _this.queryConditions.bizDateE,
    		},function(data){
    			if(!data.success){
    				_this.msgList = data.obj;
    				_this.dialogFormVisible8 = true;
    				_this.handleMsg = data.msg;
    			}else{
    				_this.msgList = [];
    				_this.dialogFormVisible8 = false;
    				_this.handleMsg = "";
    				data.msg = "共"+data.msg.split(",")[0]+"条,全部处理成功!";
    				gobal.messageShow(_this,data);
    			}
            	_this.getTableData();
        	});
	    },
	    settlementQuery : function(){//款项交收查询按钮----查询款项交收状态
	    	var _this = this;
	    	this.commonQuery =false;
	    	if(!_this.noCheckIns()){
				return;
			}
	    	request.post(_this,_this.urls.settlementQuery,{
    			ids:_this.selections.strIds
    		},function(data){
    			if(!data.success){
    				_this.msgList = data.obj;
    				_this.dialogFormVisible8 = true;
    				_this.handleMsg = data.msg;
    			}else{
    				_this.msgList = [];
    				_this.dialogFormVisible8 = false;
    				_this.handleMsg = "";
    				data.msg = "共"+data.msg.split(",")[0]+"条,全部处理成功!";
    				gobal.messageShow(_this,data);
    			}
            	_this.getTableData();
        	});
	    },
		exportInfo: function(){//导出指令入口
			var _this = this;
			this.commonQuery =false;
			_this.queryConditions.ids = _this.selections.strIds;
			if(!_this.queryConditions.excludeExportedCheck){
				//未勾选过滤已导出时,查询是否含有已导出数据,有则弹框选择是否过滤
				_this.queryConditions.excludeExported = _this.queryConditions.excludeExportedCheck;
				request.post(_this, _this.urls.hasExported, _this.queryConditions, function(data) {
					if(data.code == '1'){
						var obj={
		        		title:"提示",
		        		text:"是否过滤已导出数据!",
		        		oKText:"是",
		        		cancelText:"否",
		        		type:"warning"
						};
						gobal.openComfirm(_this, obj,
							function() {
								_this.exportInfoStart(true);
							},
							function(){},
							function(){
								_this.exportInfoStart(false);
							},
							function(){});
					}else if(data.code == '0'){
						_this.exportInfoStart(false);
					}else{
						var data2 ={
							success:false,
							code: 2,
							msg : "无可导出的指令!"
						};
						gobal.messageShow(_this, data2);
					}
				});
			}else{
				_this.exportInfoStart(true);
			}
		},
		exportInfoStart: function(excludeExported){//导出指令核心
			var _this = this;
			_this.queryConditions.excludeExported = excludeExported;
			//查询导出指令按估值系统划款类型划分的文件名列表是否非空
			request.post(_this, _this.urls.groupByTypeNotEmpty, _this.queryConditions, function(data) {
				if(data == true){
					//打开新页面导出文件
					UrlUtils.download(_this.urls.exportInfo, _this.queryConditions, true);
				}else{
					var data2 ={
						success:false,
						code: 2,
						msg : "无可导出的指令或指令未找到匹配的资产分类!"
					};
					gobal.messageShow(_this, data2);
				}
			});
		},
	    sendAttaFile : function(){ //附件栏直接发送传真
	    	var _this = this;
	    
	    	if(!_this.attaSelections.strIds){
	     		var obj={
		        		title:"提示",
		        		text:"请先选择附件!",
		        		oKText:"确 定",
		        		cancelText:"取 消",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
	     	}
	    	
	    	var fileRows = _this.attaSelections.arrRows;
	    	var flag = false;
	    	/* for(var i=0;i<fileRows.length;i++){
	    		if(fileRows[i].suffix.toLowerCase() != 'pdf'){
	    			flag = true;
	    		}
	    	} */
	    	if(flag){
	    		var obj={
		        		title:"提示",
		        		text:"传真只能发送PDF文件!",
		        		oKText:"确 定",
		        		cancelText:"取 消",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
	    	}
	    	
	    	var msg={
	        		title:"提示",
	        		text:"确定执行该操作?",
	        		oKText:"确 定",
	        		type:"warning"
	        	};
			gobal.openComfirm(this, msg, function() {
				var insFileId = '';
		    	var dealFileId = '';
		    	for(var i=0;i<fileRows.length;i++){
		    		if(fileRows[i].dataType == '1'){
		    			insFileId += fileRows[i].id +",";
		    		}
					if(fileRows[i].dataType == '2'){
						dealFileId += fileRows[i].id +",";
		    		}
		    	}
		    	if(insFileId.length>0){
		    		insFileId = insFileId.substring(0,insFileId.length-1);
		    	}
		    	if(insFileId.length>0){
		    		dealFileId = dealFileId.substring(0,dealFileId.length-1);
		    	}
		    	request.post(_this,_this.urls.sendAttaFile,{
		    		insFileId :insFileId,
		    		dealFileId :dealFileId,
		    		insId : _this.formData6.insId
	    		},function(data){
	    			gobal.messageShow(_this,data);
	    			_this.getInsFormData(_this.formData6.insId);
	        	});
			});
	    },
	    fileTableRowClassName : function(row, index){
	    	if(row.sendStatus == "1"){
	    		return "has-send-row";
	    	}
			if(row.sendStatus == "2"){
	    		return "error-row"; 
	    	}
	    },
	    rightTableShow : function(type){
	    	if(type == '00088083' || type == '00088084' || type == '00088085'){
	    		return true;
	    	}else{
	    		return false;
	    	}
	    },
		onCopyRow:function(index, rows){//复制
        	var _this = this;
        	this.commonQuery =false;
        	var chickIds = _this.selections.arrIds;
        	if(chickIds.length > 1){
        		var obj={
		        		title:"提示",
		        		text:"只能选择一条指令进行复制!",
		        		oKText:"确 定",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
        	}
        	if(chickIds.length == 0){
        		var obj={
		        		title:"提示",
		        		text:"请先选择一条指令!",
		        		oKText:"确 定",
		        		type:"warning"
		        	};
				gobal.openComfirm(_this, obj, function() {
				});
        		return;
        	}
        	//this.state2.choseTem = false;
        	this.firstLoad = true;
        	this.orgFirstload = true;
        	this.dialogTitle = '指令管理-复制';
			_this.formData2 = utils.objClone(this.formData2bak, true);//清空输入值
			_this.state2 = utils.objClone(_this.state2bak, true);//表单输入还原到编辑的默认状态
        	var param = {id:chickIds[0].id};
        	this.getFormData(param);
        	this.setFormState(dictFormState.copy);
        	this.dialogFormVisible2 = true;
        },
/*         handleSizeChange4 : function(){
        	
        },
        handleCurrentChange4 : function(val){
        	var _this = this;
        	_this.popDataConditions[gobal.pagination.rows] = 20;
		 	_this.popDataConditions[gobal.pagination.page] = val;
        	if("DVP" == _this.seachType){
        		_this.getDvpTableDate();
        	}
			if("TA" == _this.seachType){
				_this.getTaTableDate();
        	}
        },
		handleSizeChange5 : function(){
        	
        },
        handleCurrentChange5 : function(val){
        	var _this = this;
        	_this.popDataConditions[gobal.pagination.rows] = 20;
		 	_this.popDataConditions[gobal.pagination.page] = val;
        	if("DVP" == _this.seachType){
        		_this.getDvpTableDate();
        	}
			if("TA" == _this.seachType){
				_this.getTaTableDate();
        	}
        }, */
        findPopDate : function(row, column, cell, event){  //单元格 鼠标移入事件
		 	var _this=this;
	        if(column.property == 'transferType'){
	        	_this.popDataConditions.insId = row.id;
	        	var seachType = _this.checkSeachType(row.transferTypeCode);
	        	_this.seachType = seachType;
	        	if("DVP" == seachType){
	        		_this.getDvpTableDate();
	        	}
				if("TA" == seachType){
					_this.getTaTableDate();
	        	}
	        }
	        if(column.property == 'faxSendStatus'){
	        	if("-" != row.faxSendStatus){
	        		_this.getFaxStatusTableData(row.id);
	        	}
	        }
	    },
	    
	    getDvpTableDate : function(){
	    	var _this=this;
	    	request.post(this, _this.urls.findDealInfoByInsId, _this.popDataConditions, function(data) {
	    		_this.dealInfo =  data.rows;
	    		_this.total4 = data.total;
	    	});
	    },
		getTaTableDate : function(){
			var _this=this;
			request.post(this, _this.urls.findTaInfoByInsId, _this.popDataConditions, function(data) {
				_this.taDataInfo =  data.rows;
				_this.total5 = data.total;
	    	});
	    },
	    getFaxStatusTableData : function(insId){
	    	var _this=this;
			request.post(this, _this.urls.findFaxSendStatus, {insId : insId}, function(data) {
				_this.faxStatusInfo =  data;
	    	});
	    },
		selectChange: function(node, all) {
			this.queryConditions.transferType = all.map(function(item) {
				return item.ddKey
			}).join(',');    		
    	},
    	findFaxStatus : function(faxStatus){
	    	if(faxStatus == '00175005'){
	    		return 'red';
	    	}else if(faxStatus == '00175004'){
	    		return 'green';
	    	}else{
	    		return 'blue';
	    	}
	    },
	    popTransferTypeOrder : function(){
	    	//if("transferType" == column.originId){
	    		//弹出 字典自定义排序页面
	    		this.dialogFormVisible9 = true;
	    		/*this.$nextTick(function(){
	    			//$("#transferType_iframe").attr('src',ctxPath + "/tsDictOrderController/manager?key=00088&modelName=transferType");
	        	});*/
	        	var url = ctxPath + "/tsDictOrderController/manager?key=00088&modelName=transferType";
	        	var _this = this;
	        	request.post(this, url, {}, function(data) {
	        		$("#transferType_iframe").html(data);

	        		window.foreignText.saveCallBack = function() {
	        			_this.dialogFormVisible9 = false;
	        		}
	        	});
	    	//}
	    },
	    clearTree: function() {
	    	this.formData2.prdId = "";
	    	this.findAcctByPrdIdAndTransType();
	    	this.isClear = true;
	    },
	    clearTransferType: function() {
	    	this.formData2.transferType = "";
	    	this.findAcctByPrdIdAndTransType();
	    	this.isClear = true;
	    }
    }  
});
</script>
</body>
</html>